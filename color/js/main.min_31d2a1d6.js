var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,o){function a(t){try{h(n.next(t))}catch(e){o(e)}}function s(t){try{h(n["throw"](t))}catch(e){o(e)}}function h(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(a,s)}h((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,o=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=e.call(t,h)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},TextField=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.TextField);__reflect(TextField.prototype,"TextField");var Sprite=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Sprite);__reflect(Sprite.prototype,"Sprite");var Shape=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Shape);__reflect(Shape.prototype,"Shape");var DisplayObject=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObject);__reflect(DisplayObject.prototype,"DisplayObject");var DisplayObjectContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DisplayObjectContainer.prototype,"DisplayObjectContainer");var Point=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Point);__reflect(Point.prototype,"Point");var Rectangle=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Rectangle);__reflect(Rectangle.prototype,"Rectangle");var Bitmap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Bitmap);__reflect(Bitmap.prototype,"Bitmap");var BitmapData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.BitmapData);__reflect(BitmapData.prototype,"BitmapData");var Stage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Stage);__reflect(Stage.prototype,"Stage");var Tween=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Tween);__reflect(Tween.prototype,"Tween");var Ease=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(egret.Ease);__reflect(Ease.prototype,"Ease");var trace=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0;n<t.length;n++)i+=t[n]+",";i=i.substr(0,i.length-1),moon.LogManager.getIns().logMessage(i)},traceSimple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i="",n=0;n<t.length;n++)i+=t[n]+",";i=i.substr(0,i.length-1),moon.LogManager.getIns().log(i)},alertAuto=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=3),moon.AlertManager.getIns().alertAuto(t,e)},alertHand=function(t){void 0===t&&(t="提示或警告"),moon.AlertManager.getIns().alert(t)},alertRoll=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=200),moon.AlertManager.getIns().alertRoll(t,e)},moon;!function(t){var e=function(){function t(){}return t.fontName="黑体",t}();t.FONT=e,__reflect(e.prototype,"moon.FONT");var i=function(){function t(){}return t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t.SHAPE_RECT="shape rect",t.SHAPE_RECT_ROUND="shape rect round",t.SHAPE_CIRCLE="shape circle",t.VER_DEBUG="debug",t.VER_RELEASE="release",t}();t.Const=i,__reflect(i.prototype,"moon.Const");var n=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinNormal",{get:function(){return t.DeepSkyBlue},enumerable:!0,configurable:!0}),Object.defineProperty(t,"skinDown",{get:function(){return t.LightSteelBlue},enumerable:!0,configurable:!0}),Object.defineProperty(t,"titleBackground",{get:function(){return 2106923},enumerable:!0,configurable:!0}),t.getRandomArray=function(e){for(var i=[],n=0;e>n;n++)i.push(t.random);return i},t.setColorBrightness=function(t,e){var i=(t>>16)+e;i>255?i=255:0>i&&(i=0);var n=(t>>8&255)+e;n>255?n=255:0>n&&(n=0);var r=(255&t)+e;return r>255?r=255:0>r&&(r=0),r|n<<8|i<<16},t.LightPink=16758465,t.Pink=16761035,t.Crimson=14423100,t.LavenderBlush=16773365,t.PaleVioletRed=14381203,t.HotPink=16738740,t.DeepPink=16716947,t.MediumVioletRed=13047173,t.Orchid=14315734,t.Thistle=14204888,t.Plum=14524637,t.Violet=15631086,t.Magenta=16711935,t.Fuchsia=16711935,t.DarkMagenta=9109643,t.Purple=8388736,t.MediumOrchid=12211667,t.DarkVoilet=9699539,t.DarkOrchid=10040012,t.Indigo=4915330,t.BlueViolet=9055202,t.MediumPurple=9662683,t.MediumSlateBlue=8087790,t.SlateBlue=6970061,t.DarkSlateBlue=4734347,t.Lavender=15132410,t.GhostWhite=16316671,t.Blue=255,t.MediumBlue=205,t.MidnightBlue=1644912,t.DarkBlue=139,t.Navy=128,t.RoyalBlue=4286945,t.CornflowerBlue=6591981,t.LightSteelBlue=11584734,t.LightSlateGray=7833753,t.SlateGray=7372944,t.DoderBlue=2003199,t.AliceBlue=15792383,t.SteelBlue=4620980,t.LightSkyBlue=8900346,t.SkyBlue=8900331,t.DeepSkyBlue=49151,t.LightBlue=11393254,t.PowDerBlue=11591910,t.CadetBlue=6266528,t.Azure=15794175,t.LightCyan=14811135,t.PaleTurquoise=11529966,t.Cyan=65535,t.Aqua=65535,t.DarkTurquoise=52945,t.DarkSlateGray=3100495,t.DarkCyan=35723,t.Teal=32896,t.MediumTurquoise=4772300,t.LightSeaGreen=2142890,t.Turquoise=4251856,t.Auqamarin=8388522,t.MediumAquamarine=64154,t.MediumSpringGreen=16121850,t.MintCream=65407,t.SpringGreen=3978097,t.SeaGreen=3050327,t.Honeydew=15794160,t.LightGreen=9498256,t.PaleGreen=10025880,t.DarkSeaGreen=9419919,t.LimeGreen=3329330,t.Lime=65280,t.ForestGreen=2263842,t.Green=32768,t.DarkGreen=25600,t.Chartreuse=8388352,t.LawnGreen=8190976,t.GreenYellow=11403055,t.OliveDrab=5597999,t.Beige=7048739,t.LightGoldenrodYell=16448210,t.Ivory=16777200,t.LightYellow=16777184,t.Yellow=16776960,t.Olive=8421376,t.DarkKhaki=12433259,t.LemonChiffon=16775885,t.PaleGodenrod=15657130,t.Khaki=15787660,t.Gold=16766720,t.Cornislk=16775388,t.GoldEnrod=14329120,t.FloralWhite=16775920,t.OldLace=16643558,t.Wheat=16113331,t.Moccasin=16770229,t.Orange=16753920,t.PapayaWhip=16773077,t.BlanchedAlmond=16772045,t.NavajoWhite=16768685,t.AntiqueWhite=16444375,t.Tan=13808780,t.BrulyWood=14596231,t.Bisque=16770244,t.DarkOrange=16747520,t.Linen=16445670,t.Peru=13468991,t.PeachPuff=16767673,t.SandyBrown=16032864,t.Chocolate=13789470,t.SaddleBrown=9127187,t.SeaShell=16774638,t.Sienna=10506797,t.LightSalmon=16752762,t.Coral=16744272,t.OrangeRed=16729344,t.DarkSalmon=15308410,t.Tomato=16737095,t.MistyRose=16770273,t.Salmon=16416882,t.Snow=16775930,t.LightCoral=15761536,t.RosyBrown=12357519,t.IndianRed=13458524,t.Red=16711680,t.Brown=10824234,t.FireBrick=11674146,t.DarkRed=9109504,t.Maroon=8388608,t.White=16777215,t.WhiteSmoke=16119285,t.Gainsboro=14474460,t.LightGrey=13882323,t.Silver=12632256,t.DarkGray=11119017,t.Gray=8421504,t.DimGray=6908265,t.Black=0,t}();t.Color=n,__reflect(n.prototype,"moon.Color");var r=function(){function e(){}return Object.defineProperty(e,"randomRect",{get:function(){return t.UI.Rect(60,60,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"randomCircle",{get:function(){return t.UI.Circle(50,t.Color.random)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointNormal",{get:function(){return t.UI.Circle(6,t.Color.Black)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pointDown",{get:function(){return t.UI.Circle(6,t.Color.Gray)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonNormal",{get:function(){return t.UI.RoundRect(60,60,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"buttonDown",{get:function(){return t.UI.RoundRect(60,60,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOff",{get:function(){return t.UI.RadioCircle(t.Color.White,t.Color.White)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"radioOn",{get:function(){return t.UI.RadioCircle(t.Color.White,t.Color.Black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOff",{get:function(){return t.UI.CheckBoxRect(t.Color.White,t.Color.White)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"checkBoxOn",{get:function(){return t.UI.CheckBoxRect(t.Color.White,t.Color.Black,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOff",{get:function(){return t.UI.Switch(t.Color.skinNormal,t.Color.White)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"switchOn",{get:function(){return t.UI.Switch(t.Color.skinNormal,t.Color.White,1)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressBackground",{get:function(){return t.UI.Rect(300,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"progressValue",{get:function(){return t.UI.Rect(300,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBackground",{get:function(){return t.UI.Rect(300,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderValue",{get:function(){return t.UI.Rect(300,10,t.Color.skinDown)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"sliderBar",{get:function(){return t.UI.Circle(15,t.Color.White)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scrollBar",{get:function(){return t.UI.Rect(10,10,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pnBarPrevNormal",{get:function(){return t.UI.Polygon(3,20,t.Color.skinNormal,180)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pnBarPrevDown",{get:function(){return t.UI.Polygon(3,20,t.Color.skinDown,180)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pnBarNextNormal",{get:function(){return t.UI.Polygon(3,20,t.Color.skinNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pnBarNextDown",{get:function(){return t.UI.Polygon(3,20,t.Color.skinDown)},enumerable:!0,configurable:!0}),e.getRodatioButton=function(e){var i=new m(t.Skin.radioOff,t.Skin.radioOn);return i.skinAutoScale=!1,i.label=e,i.labelColor=t.Color.Black,i.setLabelPoint(40,0),i},e.getCheckBox=function(e){var i=[t.Skin.checkBoxOff,t.Skin.checkBoxOff,t.Skin.checkBoxOn,t.Skin.checkBoxOn],n=new t.MoreSkinButton(i);return n.skinAutoScale=!1,n.label=e,n.toggleSwitch=!0,n.labelColor=t.Color.Black,n.setLabelPoint(50,2),n},e}();t.Skin=r,__reflect(r.prototype,"moon.Skin");var o=function(){function t(){}return t.displayRank=function(t,e,i,n,r,o,a){void 0===e&&(e=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1);for(var s,h=0;h<t.length;h++)s=t[h],s.x=r+Math.floor(h%e)*(s.width+i)*a,s.y=o+Math.floor(h/e)*(s.height+n)*a},t}();t.SimpleLayout=o,__reflect(o.prototype,"moon.SimpleLayout");var a=function(){function e(){}return e.LineRect=function(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0);var a=new Sprite;return a.graphics.lineStyle(n,i),a.graphics.drawRect(r,o,t,e),a.graphics.endFill(),a},e.LineCircle=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;return o.graphics.lineStyle(i,e),o.graphics.drawCircle(n,r,t),o.graphics.endFill(),o},e.MatrixRect=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite,a=new egret.Matrix;return a.createGradientBox(t,e,Math.PI*r,0,0),o.graphics.beginGradientFill(egret.GradientType.LINEAR,[i,n],[1,1],[0,255],a),o.graphics.drawRect(0,0,t,e),o.graphics.endFill(),o},e.Rect=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;return o.graphics.beginFill(i),o.graphics.drawRect(n,r,t,e),o.graphics.endFill(),o},e.RectAndX=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=this.Rect(t,e,i,n,r);return o.addChild(this.CloseButton(t,e,i,1,n,r)),o},e.CloseButton=function(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0);var a=new Sprite,s=new Sprite;s.graphics.lineStyle(n,i),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var h=new Sprite;return h.graphics.lineStyle(n,i),h.graphics.moveTo(t,0),h.graphics.lineTo(0,e),a.addChild(s),a.addChild(h),a},e.RoundRect=function(t,e,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=25),void 0===r&&(r=25),void 0===o&&(o=0),void 0===a&&(a=0);var s=new Sprite;return s.graphics.beginFill(i),s.graphics.drawRoundRect(o,a,t,e,n,r),s.graphics.endFill(),s},e.Circle=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.beginFill(e),r.graphics.drawCircle(i,n,t),r.graphics.endFill(),r},e.Polygon=function(t,e,i,n){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;r.rotation=n,r.graphics.beginFill(i);for(var o=0;t>=o;o++){var a=Math.cos(o*(360/t)*Math.PI/180)*e,s=Math.sin(o*(360/t)*Math.PI/180)*e;0==o?r.graphics.moveTo(a,s):r.graphics.lineTo(a,s)}return r.graphics.endFill(),r},e.ArrowRoundRect=function(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;o.addChild(this.RoundRect(t,e,i));var a=this.Polygon(3,t/3,n,30+r);return a.x=o.width>>1,a.y=o.height>>1,o.addChild(a),o},e.ScrollLineBar=function(t,e,i){for(var n=new Sprite,r=e/3,o=0;3>o;o++){var a=this.Rect(t,1,i,0,o*r);n.addChild(a)}return n},e.AddRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.RoundRect(t,e,i));var r=this.Rect(t/2,2,0,t/4,e/2-1),o=this.Rect(2,e/2,0,t/2-1,e/4);return n.addChild(r),n.addChild(o),n},e.RemoveRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.RoundRect(t,e,i));var r=this.Rect(t/2,2,0,t/4,e/2-1);return n.addChild(r),n},e.RoundRectText=function(t,e,i,n){void 0===n&&(n="click");var r=new Sprite;r.addChild(this.RoundRect(t,e,i));var o=new TextField;return o.name="text",o.text=n,o.x=r.width-o.width>>1,o.y=r.height-o.height>>1,r.addChild(o),r},e.Switch=function(e,i,n){void 0===e&&(e=16777215),void 0===i&&(i=0),void 0===n&&(n=0);var r=t.UI.RoundRect(80,50,e,60,60);return r.addChild(t.UI.Circle(22,i,0==n?25:55,25)),r},e.CheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.Rect(40,40,t)),1==i){var r=new Sprite;r.graphics.beginFill(e),r.graphics.moveTo(0,20),r.graphics.lineTo(20,36),r.graphics.lineTo(44,8),r.graphics.lineTo(36,0),r.graphics.lineTo(20,18),r.graphics.lineTo(12,8),r.graphics.lineTo(0,20),n.addChild(r)}return n},e.RadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.Circle(16,t,16,16)),n.graphics.lineStyle(1,0),1==i){var r=this.Circle(8,e,16,16);n.addChild(r)}return n},e.Gridding=function(t,e){void 0===e&&(e=0);var i=new Sprite;i.graphics.lineStyle(.1,e);for(var n=t.width/t.x,r=t.height/t.y,o=0;o<t.x;o++)i.graphics.moveTo(0,o*r),i.graphics.lineTo(t.width,o*r);for(var o=0;o<t.y;o++)i.graphics.moveTo(o*n,0),i.graphics.lineTo(o*n,t.height);return i},e.Heart=function(t,e){void 0===t&&(t=15),void 0===e&&(e=16711680);var i=new Sprite;return i.graphics.beginFill(e),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(t,2.5*-t,2*t,1.5*-t,0,0),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(-t,2.5*-t,2*-t,1.5*-t,0,0),i.graphics.endFill(),i.anchorOffsetX=-i.width/2,i.anchorOffsetY=-i.height,i},e}();t.UI=a,__reflect(a.prototype,"moon.UI");var s=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){var e=(new y).textField;e.textAlign=egret.HorizontalAlign.LEFT,t.addChild(e),this.txtSimple=e,e=(new y).textField,e.size=25,t.addChild(e),this.txtMessage=e},t.prototype.debug=function(t){this.txtSimple.text=t},t.prototype.log=function(t){D.version==i.VER_DEBUG&&(this.txtSimple.text=t)},t.prototype.logMessage=function(t){D.version==i.VER_DEBUG&&this.txtMessage.appendText(t+"\n")},t.prototype.setLogColor=function(t){this.txtSimple.textColor=t},t.prototype.setLogMessageColor=function(t){this.txtMessage.textColor=t},t}();t.LogManager=s,__reflect(s.prototype,"moon.LogManager");var h=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.init=function(t){this.stage=t},t.prototype.alertAuto=function(t,e){void 0===t&&(t="自动关闭的提示"),void 0===e&&(e=3);var i;return this.stage?(this.stage.getChildByName("AlertAutoBar")&&(i=this.stage.getChildByName("AlertAutoBar"),i.removeFromParent(!0)),i=new I(t,e),i.name="AlertAutoBar",this.stage.addChild(i)):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),i},t.prototype.alert=function(t){void 0===t&&(t="手动关闭的提示");var e=new k(t);return this.stage?this.stage.addChild(e):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),e},t.prototype.alertRoll=function(t,e){void 0===t&&(t="提示或警告"),void 0===e&&(e=200);var i=new P(t,e);return this.stage?this.stage.addChild(i):trace("调用alertAuto时请先执行AlertManager的init初始化函数"),i},t}();t.AlertManager=h,__reflect(h.prototype,"moon.AlertManager");var l=function(){function e(){this.bgName="tips_png"}return e.getIns=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(t){this.stage=t},e.prototype.simpleTips=function(e,i){null==this.tipsView&&(this.tipsView=new t.BasicTips(this.bgName),this.tipsView.setValue(e),this.stage.addChild(this.tipsView),this.setPosition(i),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this))},e.prototype.setPosition=function(t){t&&(this.tipsView.x=t.x-(this.tipsView.width>>1),this.tipsView.y=t.y-2*this.tipsView.height,this.tipsView.y<0&&(this.tipsView.y=t.y),this.tipsView.y+this.tipsView.height>this.stage.stageHeight&&(this.tipsView.y=t.y-(this.tipsView.height+50)),this.tipsView.x<0&&(this.tipsView.x=t.x+50),this.tipsView.x+this.tipsView.width>this.stage.stageWidth&&(this.tipsView.x=t.x-(this.tipsView.width+50)))},e.prototype.removeTips=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.removeTips,this);var t=this.tipsView.parent;null!=t&&(t.removeChild(this.tipsView),this.tipsView=null)},e}();t.TipsManager=l,__reflect(l.prototype,"moon.TipsManager");var c=function(t){function e(e,i,n){void 0===e&&(e=""),void 0===i&&(i=null),void 0===n&&(n=null);var r=t.call(this)||this;return r.type=e,r.data=i,r.currentTarget=n,r}return __extends(e,t),e.MOUSE_OVER="event-over",e.MOUSE_OUT="event-out",e.MOUSE_DOWN="event-down",e.MOUSE_MOVE="event-move",e.MOUSE_UP="event-up",e.CLICK="event-click",e.CHANGE="change",e.COMPLETE="complete",e.ERROR="error",e.RENDER_COMPLETE="render complete",e.UPDATE="update",e.START="start",e.MOVE="move",e.OVER="over",e.PAUSE="pause",e.STOP="stop",e.PLAY="play",e.OPEN="open",e.CLOSE="close",e}(egret.EventDispatcher);t.MoonEvent=c,__reflect(c.prototype,"moon.MoonEvent");var u=function(t){function e(){var e=t.call(this)||this;return e._type=i.SHAPE_RECT,e._color=0,e.display=new Sprite,e.bg=new Sprite,e}return __extends(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._data.c=t,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{set:function(t){this._data=t,this.draw()},enumerable:!0,configurable:!0}),e.prototype.draw=function(){this._color=this._data.c,this.display.graphics.clear(),this.display=this.getDisplay(this._data),this.addChild(this.display),this.setPosition()},e.prototype.setPosition=function(){this._hasBg&&this.type!=i.SHAPE_CIRCLE&&(this.display.x=this.bg.width-this.display.width>>1,this.display.y=this.bg.height-this.display.height>>1)},e.prototype.setBackground=function(t,e){void 0===e&&(e=1),this._hasBg=!0;var i=this._data,n={};for(var r in i)n[r]=i[r];n.c=t,n.w&&(n.w=n.w+2*e),n.h&&(n.h=n.h+2*e),n.r&&(n.r=n.r+e),this.bg.graphics.clear(),this.bg=this.getDisplay(n),this.addChildAt(this.bg,0),this.setPosition()},e.prototype.getDisplay=function(t){switch(this.type){case i.SHAPE_RECT:return a.Rect(t.w,t.h,t.c);case i.SHAPE_RECT_ROUND:return a.RoundRect(t.w,t.h,t.c,t.ew,t.eh);case i.SHAPE_CIRCLE:return a.Circle(t.r,t.c)}},e}(Sprite);t.MoonDisplayObject=u,__reflect(u.prototype,"moon.MoonDisplayObject");var d=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.dispEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var n=this.dataEvent[t];if(null!=n){var r=new c;r.currentTarget=this,r.data=e,r.type=t,r.dataType=i,n["this"]?n.apply(n["this"],[r]):n(r)}}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=i,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildren=function(t){for(void 0===t&&(t=!1);this.numChildren>0;)this.removeChildIndex(0,t)},e.prototype.removeChildIndex=function(t,i){if(t>=0||t<this.numChildren){var n=this.getChildAt(t);if(n instanceof e)n.removeFromParent(i);else{var r=this.getChildAt(t);r.parent&&r.parent.removeChild(r)}}},e.prototype.dispose=function(){this.removeChildren(!0),this.dataEvent=null,this.stageWidth=null,this.stageHeight=null},e}(DisplayObjectContainer);t.MoonContainer=d,__reflect(d.prototype,"moon.MoonContainer");var p=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.createText=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i="");var n=(new y).textField;return n.x=t,n.y=e,n.text=i,this.addChild(n),n},i.prototype.createRect=function(e,i,n,r,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0);var a=t.UI.Rect(e,i,n,r,o);return this.addChild(a),a},i.prototype.createCircle=function(e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=t.UI.Circle(e,i,n,r);return this.addChild(o),o},i.prototype.createRectBySprite=function(t,e,i,n,r,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),t.graphics.clear(),t.graphics.beginFill(n),t.graphics.drawRect(r,o,e,i),t.graphics.endFill()},i.prototype.createBackground=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var i=this.createRect(this.stageWidth,this.stageHeight,t);return i.alpha=e,i.touchEnabled=!0,i},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=96963),void 0===e&&(e=14540253);var i=this.stageWidth,n=this.stageHeight,r=new egret.Matrix;r.createGradientBox(i,n,Math.PI/2);var o=new Sprite;return o.graphics.beginGradientFill(egret.GradientType.LINEAR,[t,e],[1,1],[0,255],r),o.graphics.drawRect(0,0,i,n),this.addChild(o),o},i}(d);t.BasicView=p,__reflect(p.prototype,"moon.BasicView");var g=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.play=function(){this.stop(),this.isPlay=!0,egret.startTick(this.loop,this)},i.prototype.stop=function(){this.isPlay=!1,egret.stopTick(this.loop,this)},i.prototype.loop=function(t){return traceSimple(t),!0},i.prototype.createButton=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var r=new t.BasicButton;return r.label=e,r.x=i,r.y=n,this.addChild(r),r},i}(p);t.GameView=g,__reflect(g.prototype,"moon.GameView");var f=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this)||this;return null!=e&&(RES.hasRes(e)?(n.texture=RES.getRes(e),n.scale9Grid=i||new Rectangle(8,8,2,2)):egret.error("找不到资源："+e)),n}return __extends(e,t),e.prototype.addOutWebImage=function(t){if(""!=t&&null!=t){var e=new egret.ImageLoader;egret.ImageLoader.crossOrigin="anonymous",e.addEventListener(egret.Event.COMPLETE,this.loadCompleteHandler,this),e.load(t)}},e.prototype.loadCompleteHandler=function(t){var e=t.currentTarget,i=new egret.Texture;i._setBitmapData(e.data),this.texture=i},e}(Bitmap);t.Scale9Image=f,__reflect(f.prototype,"moon.Scale9Image");var v=function(t){function e(e){var i=t.call(this)||this;return i.side=14,i.lineSpacing=4,i.image=new f(e),i.addChild(i.image),i.text=(new y).textField,i.text.textAlign=egret.HorizontalAlign.CENTER,i.text.verticalAlign=egret.VerticalAlign.MIDDLE,i.text.lineSpacing=i.lineSpacing,i.addChild(i.text),i}return __extends(e,t),e.prototype.setValue=function(t){this.text.text=t,this.setCenter()},e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setCenter()},e.prototype.setCenter=function(){var t=this.image,e=this.text,i=this.side,n=e.width+i,r=e.height+i;t.width=n,t.height=r,e.x=e.y=i>>1},e}(d);t.BasicTips=v,__reflect(v.prototype,"moon.BasicTips");var y=function(e){function i(i,n){void 0===i&&(i=""),void 0===n&&(n=16777215);var r=e.call(this)||this;return r.text=new TextField,r.text.textAlign=egret.HorizontalAlign.LEFT,r.text.verticalAlign=egret.VerticalAlign.MIDDLE,r.text.text=i,r.text.textColor=n,r.text.fontFamily=t.FONT.fontName,r.addChild(r.text),r}return __extends(i,e),Object.defineProperty(i.prototype,"textField",{get:function(){return this.text},enumerable:!0,configurable:!0}),i}(d);t.Label=y,__reflect(y.prototype,"moon.Label");var m=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this;return n.skinAutoScale=!0,n.statusNormal=e||r.buttonNormal,n.statusDown=i||r.buttonDown,n.skinContainer=new DisplayObjectContainer,n.addChild(n.skinContainer),n.updateSkin(n.statusNormal),n.text=(new y).textField,n.addChild(n.text),n.open(),n}return __extends(e,t),e.prototype.open=function(){this.close(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.setGray(!1)},e.prototype.close=function(){this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},e.prototype.closeAndSetGray=function(){this.close(),this.setGray(!0)},e.prototype.setLabelPoint=function(t,e){this.text.anchorOffsetX=0,this.text.anchorOffsetY=0,this.text.x=t,this.text.y=e},Object.defineProperty(e.prototype,"labelCircle",{set:function(t){this.text.text=t,this.skinAutoScale=!1,this.text.x=this.text.y=0,this.text.anchorOffsetX=this.text.textWidth>>1,this.text.anchorOffsetY=this.text.textHeight>>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelColor",{set:function(t){this.text.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this.text.text},set:function(t){this.text.text=t;this.text.width+20;this.setSkinSize(),this.setTextPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFild",{get:function(){return this.text},enumerable:!0,configurable:!0}),e.prototype.setTextFlow=function(t){this.text.textFlow=t,this.setSkinSize(),this.setTextPosition()},e.prototype.setSkinNormal=function(){this.updateSkin(this.statusNormal)},e.prototype.setSkinDown=function(){this.updateSkin(this.statusDown)},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusDown)):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.updateSkin(this.statusNormal)),this.dispEvent(c.CLICK)},Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.text.width+20},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.text.height+20},enumerable:!0,configurable:!0}),e.prototype.setSkinSize=function(){if(this.skinAutoScale&&""!=this.text.text){var t=this.textWidth/this.statusNormal.width;this.statusNormal instanceof Bitmap?(this.statusNormal.width=this.textWidth,this.statusDown.width=this.textWidth):this.statusNormal.scaleX=this.statusDown.scaleX=t;var e=this.textHeight;e>=this.statusNormal.height&&(t=e/this.statusNormal.height,this.statusNormal instanceof Bitmap?(this.statusNormal.height=this.textHeight,this.statusDown.height=this.textHeight):this.statusNormal.scaleY=this.statusDown.scaleY=t)}},e.prototype.setTextPosition=function(){this.text.anchorOffsetX=this.text.width>>1,this.text.anchorOffsetY=this.text.height>>1,this.textWidth>this.statusNormal.width?this.text.x=this.textWidth>>1:this.text.x=this.statusNormal.width>>1,this.textHeight>this.statusNormal.height?this.text.y=this.textHeight>>1:this.text.y=this.statusNormal.height>>1},e.prototype.updateSkin=function(t){this.skinContainer.removeChildren(),this.skinContainer.addChild(t)},e.prototype.setGray=function(t){t?this.filters=[new egret.ColorMatrixFilter([.3,.6,.08,0,0,.3,.6,.08,0,0,.3,.6,.08,0,0,0,0,0,1,0])]:this.filters=null},e.prototype.dispose=function(){this.close(),t.prototype.dispose.call(this)},e}(d);t.BasicButton=m,__reflect(m.prototype,"moon.BasicButton",["moon.IOnoff"]);var C=function(t){function e(e){var i=t.call(this,e[0],e[1])||this;return i._currentPage=0,i.skins=e,i}return __extends(e,t),e.prototype.updatePage=function(t){this.currentPage=t,this.setSkinNormal()},Object.defineProperty(e.prototype,"currentPage",{get:function(){return this._currentPage},set:function(t){t=2*t==this.skins.length?0:t,this._currentPage=t,this.statusNormal=this.skins[2*t],this.statusDown=this.skins[2*t+1],this.setSkinSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toggleSwitch",{set:function(t){this._toggleSwitch=t},enumerable:!0,configurable:!0}),e.prototype.onTouch=function(e){e.type==egret.TouchEvent.TOUCH_END&&this._toggleSwitch&&(this.currentPage=1-this.currentPage),t.prototype.onTouch.call(this,e)},e}(m);t.MoreSkinButton=C,__reflect(C.prototype,"moon.MoreSkinButton");var _=function(e){function i(){var i=this,n=t.Skin.switchOn,r=t.Skin.switchOn,o=t.Skin.switchOff,a=t.Skin.switchOff,s=[n,r,o,a];return i=e.call(this,s)||this,i.toggleSwitch=!0,i}return __extends(i,e),i}(C);t.SwitchButtion=_,__reflect(_.prototype,"moon.SwitchButtion");var x=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){var e=this.items.indexOf(t);e>=0&&this.items.splice(e,1)},e.prototype.hasItem=function(t){return this.items.length>0&&t>=0&&t<this.items.length},e.prototype.getItem=function(t){return this.items[t]},e.prototype.getNextItem=function(){return this.items[this.index++]},e.prototype.getIndexByItem=function(t){return this.items.indexOf(t)
},e.prototype.reset=function(){this.index=0},e.prototype.update=function(){},e.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=10);for(var n=0;n<this.items.length;n++){var r=this.items[n];t==i.VERTICAL?r.y=(r.height+e)*n:r.x=(r.width+e)*n}},e.prototype.dispose=function(){for(this.reset();this.hasItem(this.index);){var t=this.getItem(this.index);this.removeItem(t),t instanceof d&&t.removeFromParent(!0)}},e}(p);t.BasicBar=x,__reflect(x.prototype,"moon.BasicBar",["moon.IItem","moon.ILayout"]);var w=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=t.call(this)||this;return n._value=0,n.setSkin(e,i),n.addChild(n.skinBg),n.addChild(n.skinValue),n.text=(new y).textField,n.addChild(n.text),n}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||r.progressBackground,this.skinValue=e||r.progressValue},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t},enumerable:!0,configurable:!0}),e.prototype.showText=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=-1),this.text.text=t,-1==e?this.text.x=this.skinBg.width-this.text.width>>1:this.text.x=e,-1==i?this.text.y=this.skinBg.height+5:this.text.y=i},e}(d);t.ProgressBar=w,__reflect(w.prototype,"moon.ProgressBar");var b=function(t){function e(e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null);var o=t.call(this,e,i)||this;return o.skinBar=n||r.sliderBar,o.addChild(o.skinBar),o.skinBar.addEventListener(egret.TouchEvent.TOUCH_BEGIN,o.onTouch,o),o.skinBar.touchEnabled=!0,o.layout(),o.value=1,o}return __extends(e,t),e.prototype.setSkin=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.skinBg=t||r.sliderBackground,this.skinValue=e||r.sliderValue},e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY),this.dispEvent(c.MOVE);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.dispEvent(c.OVER)}},e.prototype.moveDo=function(t,e){var n,r=this.globalToLocal(t,e);n=this.type==i.HORIZONTAL?r.x/this.skinValue.width:-r.y/this.skinValue.width,this.value=n},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){t=0>t?0:t>1?1:t,this._value=t,this.skinValue.scaleX=t,this.type==i.HORIZONTAL?this.skinBar.x=this.skinValue.width*t:this.skinBar.y=-this.skinValue.width*t},enumerable:!0,configurable:!0}),e.prototype.layout=function(t,e){if(void 0===t&&(t=i.HORIZONTAL),void 0===e&&(e=0),this.type=t,t==i.VERTICAL){var n=-90;this.skinBar.x=this.skinValue.height>>1}else{var n=0;this.skinBar.y=this.skinValue.height>>1}this.skinBg.rotation=n,this.skinValue.rotation=n},e}(w);t.SliderBar=b,__reflect(b.prototype,"moon.SliderBar",["moon.ILayout"]);var S=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.skinBar=e||r.scrollBar,i.skinBar.alpha=0,i.addChild(i.skinBar),i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouch,i),i.touchEnabled=!0,i.startPos=new Point,i.stPos=new Point,i.setSize(),i.layout(),i}return __extends(e,t),e.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.stPos.x=t.stageX,this.stPos.y=t.stageY,this.startPos.x=t.stageX-this._target.x,this.startPos.y=t.stageY-this._target.y,this.hideShow(1),this.startTime=egret.getTimer();break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX,t.stageY);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.hideShow(0,100),this.timeMove(t.stageX,t.stageY)}},e.prototype.timeMove=function(t,e){var n=egret.getTimer()-this.startTime;if(500>n){var r=this._target,o=this.maskRect;Tween.removeTweens(r);var a=t-this.stPos.x,s=e-this.stPos.y,h=Math.sqrt(a*a+s*s),l=h/n*100,c=Tween.get(r);if(this.type==i.VERTICAL){var u=s>0?1:-1;l*=u;var d=r.y+l;d>0&&r.y+l>0&&(d=0),0>d&&r.y+l<o.height-r.height&&(d=o.height-r.height),c.to({y:d},400,Ease.sineOut).call(this.setBarPos,this)}else{var u=a>0?1:-1;l*=u;var p=r.x+l;p>0&&r.x+l>0&&(p=0),0>p&&r.x+l<o.width-r.width&&(p=o.width-r.width),c.to({x:p},400,Ease.sineOut).call(this.setBarPos,this)}}},e.prototype.setBarPos=function(){this.type==i.VERTICAL?this.skinBar.y=-this._target.y/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height):this.skinBar.x=-this._target.x/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width)},e.prototype.hideShow=function(t,e){void 0===e&&(e=1e3),Tween.removeTweens(this.skinBar),1==t&&(this.skinBar.alpha=1);var i=Tween.get(this.skinBar);i.to({alpha:t},e)},e.prototype.moveDo=function(t,e){this.type==i.VERTICAL?this.canMoveY(e):this.type==i.HORIZONTAL&&this.canMoveX(t)},e.prototype.canMoveX=function(t){var e=this.maskRect.width-this._target.width,i=t-this.startPos.x;i>e&&0>i&&(this._target.x=i,this.skinBar.x=-i/(this._target.width-this.maskRect.width)*(this.maskRect.width-this.skinBar.width))},e.prototype.canMoveY=function(t){var e=this.maskRect.height-this._target.height,i=t-this.startPos.y;i>e&&0>i&&(this._target.y=i,this.skinBar.y=-i/(this._target.height-this.maskRect.height)*(this.maskRect.height-this.skinBar.height))},e.prototype.setMask=function(){null!=this.maskRect&&null!=this._target&&(this._target.mask=this.maskRect)},e.prototype.setSkinBarPos=function(){this.skinBar.x=this.skinBar.y=0,this.type==i.VERTICAL?this.skinBar.x=this.maskRect.width-this.skinBar.width:this.type==i.HORIZONTAL&&(this.skinBar.y=this.maskRect.height-this.skinBar.height)},e.prototype.layout=function(t,e){void 0===t&&(t=i.VERTICAL),void 0===e&&(e=0),this.type=t,this.setSkinBarPos()},e.prototype.setSize=function(t,e){void 0===t&&(t=200),void 0===e&&(e=200),this.maskRect=a.Rect(t,e),this.addChild(this.maskRect),this.setMask(),this.setSkinBarPos()},Object.defineProperty(e.prototype,"target",{set:function(t){this._target=t,this.addChildAt(this._target,0),this.setMask()},enumerable:!0,configurable:!0}),e}(d);t.ScrollBar=S,__reflect(S.prototype,"moon.ScrollBar",["moon.ILayout"]);var T=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=r.getCheckBox(t):e.label=t,this.addItem(e)},i.prototype.addItem=function(t){e.prototype.addItem.call(this,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),t.removeFromParent(!0)},i.prototype.onClick=function(e){e.currentTarget;this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(i.prototype,"selectIndexs",{get:function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e];1==i.currentPage&&t.push(e)}return t},enumerable:!0,configurable:!0}),i}(x);t.CheckBoxBar=T,__reflect(T.prototype,"moon.CheckBoxBar");var E=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAutoLayout=!1,t}return __extends(i,e),i.prototype.addItemLabel=function(t,e){void 0===e&&(e=null),null==e?e=r.getRodatioButton(t):e.label=t,this.addItem(e)},i.prototype.render=function(){this.update()},i.prototype.update=function(){var t;if(1==this.isAutoLayout)for(var e=0;e<this.items.length;e++)t=this.items[e],t.x=(t.width+10)*e},i.prototype.onClick=function(e){var i=e.currentTarget;this.selectIndex=this.items.indexOf(i),this.dispEvent(t.MoonEvent.CHANGE)},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){function e(t){t.setSkinNormal()}this._selectIndex=t;var i=this.items[t];this.items.map(e,this),i.setSkinDown()},enumerable:!0,configurable:!0}),i}(T);t.RadioButtonBar=E,__reflect(E.prototype,"moon.RadioButtonBar");var B=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._selectIndex=0,t}return __extends(i,e),i.prototype.onClick=function(t){var e=t.currentTarget;this.selectItem(e)},i.prototype.selectItem=function(e){for(this.reset();this.hasItem(this.index);){var i=this.getNextItem();i.currentPage=0,i.setSkinNormal(),i.open()}e&&(e.close(),e.currentPage=1,e.setSkinNormal(),this._selectIndex=this.items.indexOf(e),this.dispEvent(t.MoonEvent.CHANGE,this._selectIndex))},Object.defineProperty(i.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){this._selectIndex=t,this.selectItem(this.getItem(t))},enumerable:!0,configurable:!0}),i}(T);t.TabbarBar=B,__reflect(B.prototype,"moon.TabbarBar");var R=function(e){function n(t,n,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=100);var a=e.call(this)||this;return a._selectIndex=0,a._total=1,a.btnPrev=t||new m(r.pnBarPrevNormal,r.pnBarPrevDown),a.btnNext=n||new m(r.pnBarNextNormal,r.pnBarNextDown),a._interval=o,a.addChild(a.btnPrev),a.addChild(a.btnNext),a.addItem(a.btnPrev),a.addItem(a.btnNext),a.layout(i.HORIZONTAL,o),a.selectItem(),a}return __extends(n,e),n.prototype.onClick=function(t){var e=t.currentTarget,i=this._selectIndex,n=this._total-1;i=e==this.btnPrev?i>0?--i:0:n>i?++i:n,this.selectIndex=i},n.prototype.selectItem=function(){for(this.reset();this.hasItem(this.index);){var e=this.getNextItem();e.filters=null,e.close(),e.open()}0==this._selectIndex&&this.btnPrev.closeAndSetGray(),this._selectIndex==this._total-1&&this.btnNext.closeAndSetGray(),this.dispEvent(t.MoonEvent.CHANGE,this._selectIndex)},Object.defineProperty(n.prototype,"selectIndex",{get:function(){return this._selectIndex},set:function(t){this._selectIndex=t,this.selectItem()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"total",{get:function(){return this._total},set:function(t){this._total=t,this.selectItem()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"interval",{get:function(){return this._interval},set:function(t){this._interval=t,this.layout(i.HORIZONTAL,t)},enumerable:!0,configurable:!0}),n}(T);t.PrevNextBar=R,__reflect(R.prototype,"moon.PrevNextBar");var k=function(t){function e(e){void 0===e&&(e="提示或警告");var i=t.call(this)||this;return i.bgColor=n.DarkGray,i.text=(new y).textField,i.text.text=e,i}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.initView()},e.prototype.initView=function(){var t=(this.createBackground(0,.3),this.text.width),e=this.text.height,n=t+80,r=e+120,o=this.stageWidth-n>>1,a=this.stageHeight-r>>1;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:n,h:r,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.bg.x=o,this.bg.y=a,this.bg.alpha=.8,this.addChild(this.bg);var s=new m;s.label="确 定",this.bg.addChild(s),s.x=n-s.width>>1,s.y=this.text.y+e+40,s.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.text.x=o+(n-t>>1),this.text.y=a+20,this.addChild(this.text)},e.prototype.onClick=function(t){this.removeFromParent(!0),this.dispEvent(c.CLOSE)},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.bg=null,this.bgColor=null,this.text=null},e}(x);t.AlertBar=k,__reflect(k.prototype,"moon.AlertBar");var I=function(t){function e(e,i){void 0===e&&(e="提示或警告"),void 0===i&&(i=3);var n=t.call(this,e)||this;return n.time=i,n}return __extends(e,t),e.prototype.initView=function(){var t=this.text.width,e=this.text.height,n=t+20,r=e+20,o=this.stageWidth-n>>1,a=this.stageHeight-r>>1;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:n,h:r,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.bg.x=o,this.bg.y=a,this.addChild(this.bg),this.text.x=o+(n-t>>1),this.text.y=a+(r-e>>1),this.addChild(this.text),this.alpha=0,this.bg.alpha=.8;var s=this.y-50;Tween.get(this).to({alpha:.8},500).wait(1e3*this.time).to({alpha:0,y:s},500).call(this.backCall,this)},e.prototype.backCall=function(){Tween.removeTweens(this),this.removeFromParent(!0),this.time=null,this.dispEvent(c.CLOSE)},e.prototype.dispose=function(){t.prototype.dispose.call(this),Tween.removeTweens(this)},e}(k);t.AlertAutoBar=I,__reflect(I.prototype,"moon.AlertAutoBar");var P=function(t){function e(e,i){void 0===e&&(e="提示或警告"),void 0===i&&(i=200);var n=t.call(this,e)||this;return n.bgWidth=i,n}return __extends(e,t),e.prototype.initView=function(){var t=this.text.width,e=this.text.height,n=this.bgWidth,r=e+20,o=this.stageWidth-n>>1,s=100;this.bg=new u,this.bg.type=i.SHAPE_RECT,this.bg.data={w:n,h:r,c:this.bgColor},this.bg.x=o,this.bg.y=s,this.addChild(this.bg);var h=a.Rect(n,r,0,o,s);this.addChild(h),this.bg.mask=h,this.text.x=n,this.text.y=10,this.bg.addChild(this.text);var l=2e3+100*this.text.text.length,c=-t;Tween.get(this.text).to({x:c},l).call(this.backCall,this)},e.prototype.backCall=function(){Tween.removeTweens(this),Tween.removeTweens(this.text),this.removeFromParent(!0),this.bgWidth=null,this.dispEvent(c.CLOSE)},e}(k);t.AlertRollBar=P,__reflect(P.prototype,"moon.AlertRollBar");var O=function(e){function i(i,n){var r=e.call(this)||this,o=new p,a=new S;return a.target=o,a.setSize(i,n),a.layout(t.Const.VERTICAL),r.addChild(a),r.container=o,r.scrollBar=a,r}return __extends(i,e),i.prototype.addItem=function(t){e.prototype.addItem.call(this,t),this.container.addChild(t),t.y=(this.items.length-1)*t.height,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&(this.container.removeChild(t),t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.resetPostion())},i.prototype.resetPostion=function(){for(this.reset();this.hasItem(this.index);){var t=this.index,e=this.getNextItem();e.x=t*e.height}},i.prototype.twoDistance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},i.prototype.onTouch=function(t){if(t.type==egret.TouchEvent.TOUCH_BEGIN)this.posStart=new Point(t.stageX,t.stageY);else{var e=new Point(t.stageX,t.stageY);this.posStart&&this.twoDistance(this.posStart,e)<20&&this.onClick(t.currentTarget),this.posStart=null}},i.prototype.onClick=function(t){var e={item:t,index:this.getIndexByItem(t)};this.dispEvent(c.CLICK,e)},i}(x);t.ListBar=O,__reflect(O.prototype,"moon.ListBar");var L=function(t){function e(e,i){void 0===e&&(e=100),void 0===i&&(i=50);var n=t.call(this)||this;return n.text=(new y).textField,n.inputW=e,n.inputH=i,n}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=this.inputW,n=this.inputH;this.bg=new u,this.bg.type=i.SHAPE_RECT_ROUND,this.bg.data={w:e,h:n,c:this.bgColor,ew:10,eh:10},this.bg.setBackground(0,2),this.addChild(this.bg);var r=5;this.text.x=r,this.text.y=r,this.text.width=e-2*r,this.text.height=n-2*r,this.text.type=egret.TextFieldType.INPUT,this.addChild(this.text)},e.prototype.setMultiline=function(){this.text.wordWrap=!0,this.text.multiline=!0,this.text.verticalAlign=egret.VerticalAlign.TOP},Object.defineProperty(e.prototype,"color",{set:function(t){this.bgColor=t,this.bg&&(this.bg.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxChars",{set:function(t){this.text.maxChars=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restrict",{set:function(t){this.text.restrict=t},enumerable:!0,configurable:!0}),e}(x);t.InputBar=L,__reflect(L.prototype,"moon.InputBar");var M=function(e){function i(t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n=e.call(this)||this;return n.titleHeight=60,n.pWidth=t,n.pHeight=t,n.titleBg=new Sprite,n.containerBg=new Sprite,n.title=(new y).textField,n.container=new d,n}return __extends(i,e),i.prototype.render=function(){0==this.pWidth&&0==this.pWidth?e.prototype.render.call(this):(this.stageWidth=this.pWidth,this.stageHeight=this.pHeight),this.createRectBySprite(this.titleBg,this.stageWidth,this.titleHeight,t.Color.titleBackground),this.createRectBySprite(this.containerBg,this.stageWidth,this.stageHeight-this.titleHeight,t.Color.White,0,this.titleHeight),this.addChild(this.titleBg),this.addChild(this.containerBg),this.title.anchorOffsetX=this.title.textWidth>>1,this.title.anchorOffsetY=this.title.textHeight>>1,this.title.x=this.stageWidth>>1,this.title.y=this.titleHeight>>1,this.addChild(this.title),this.container.y=this.titleHeight,this.addChild(this.container),this.containerMask=this.createRect(this.stageWidth,this.stageHeight-this.titleHeight,t.Color.White,0,this.titleHeight),this.container.mask=this.containerMask,this.touchEnabled=!0,this.dispEvent(c.RENDER_COMPLETE)},i.prototype.addItem=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),e.prototype.addItem.call(this,t),0!=i&&(t.x=i),0!=n&&(t.y=n),this.container.addChild(t)},i.prototype.removeItem=function(t){e.prototype.removeItem.call(this,t),this.container.contains(t)&&this.container.removeChild(t)},Object.defineProperty(i.prototype,"label",{get:function(){return this.title.text},set:function(t){this.title.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorTop",{set:function(t){var e=this.titleBg.width,i=this.titleBg.height;this.createRectBySprite(this.titleBg,e,i,t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"colorBottom",{set:function(t){var e=this.containerBg.width,i=this.containerBg.height;this.createRectBySprite(this.containerBg,e,i,t,0,this.titleHeight)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"windowRect",{get:function(){var t=new Rectangle(0,0,this.stageWidth,this.stageHeight);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this.titleHeight},enumerable:!0,configurable:!0}),i.prototype.removeAll=function(){this.container.dispose()},i}(x);t.PanelBar=M,__reflect(M.prototype,"moon.PanelBar");var G=function(e){function i(){var t=e.call(this)||this;return t.radioButton=new E,t.currentPage=0,t.posStartX=0,t.moveItems=[],t.container=new d,t.addChild(t.container),t.radioButton.isAutoLayout=!0,t}return __extends(i,e),i.prototype.open=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.close=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this)},i.prototype.update=function(){this.container.removeChildren();var e,i;if(this.items.length>0){var n=this.items[0];this.container.addChild(n),e=n.windowRect.width,i=n.windowRect.height,this.panelWidth=e}for(var r=this.items.length,o=0;r>o;o++){var a=new m(t.Skin.pointNormal,t.Skin.pointDown);this.radioButton.addItem(a)}a=this.radioButton.getItem(0),a.setSkinDown(),this.radioButton.x=e-22*r>>1,this.radioButton.y=i-20,this.addChild(this.radioButton)},i.prototype.render=function(){this.update(),this.items.length>1&&this.open()},i.prototype.onTouch=function(t){switch(t.type){case egret.TouchEvent.TOUCH_BEGIN:this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.posStartX=t.stageX,this.dispEvent(c.START);break;case egret.TouchEvent.TOUCH_MOVE:this.moveDo(t.stageX);break;case egret.TouchEvent.TOUCH_END:this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouch,this),this.moveEnd(t.stageX)}},i.prototype.moveDo=function(t){var e=t-this.posStartX;if(Math.abs(e)>20){if(0==this.moveItems.length){var i=this.items[this.currentPage],n=this.panelWidth;this.moveItems.push(i),0==this.currentPage?(i=this.items[this.currentPage+1],this.container.addChild(i),i.x=n,this.moveItems.push(i)):this.currentPage==this.items.length-1?(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-n,this.moveItems.push(i)):(i=this.items[this.currentPage-1],this.container.addChild(i),i.x=-n,this.moveItems.push(i),i=this.items[this.currentPage+1],this.container.addChild(i),i.x=n,this.moveItems.push(i))}var r=0==this.currentPage&&e>0,o=this.currentPage==this.items.length-1&&0>e;r||o||(this.container.x=e)}},i.prototype.moveEnd=function(t){if(0==this.container.x)return void this.backCall(0);var e=t-this.posStartX,i=egret.Tween.get(this.container),n=this.panelWidth,r=this.panelWidth>>2;Math.abs(e)>r?(n=this.panelWidth,n*=e>0?1:-1):(e=0,n=0);var o=200;i.to({x:n},o),i.call(this.backCall,this,[e])},i.prototype.backCall=function(t){t>0?(this.currentPage--,this.currentPage=this.currentPage<0?0:this.currentPage):0>t&&(this.currentPage++,this.currentPage=this.currentPage==this.items.length?this.items.length-1:this.currentPage),this.container.removeChildren();var e=this.items[this.currentPage];e.x=0,this.container.addChild(e),this.radioButton.selectIndex=this.currentPage,this.moveItems.length=0,this.container.x=0,this.dispEvent(c.OVER)},i.prototype.dispose=function(){e.prototype.dispose.call(this),this.close()},i}(x);t.PanelMoreManager=G,__reflect(G.prototype,"moon.PanelMoreManager",["moon.IOnoff"]);var D=function(){function t(){}return t.stageWidth=640,t.stageHeight=1136,t.FPS=60,t.version=i.VER_DEBUG,t.isMobile=egret.Capabilities.isMobile,t.gameId=1,t.score=0,t}();t.GameData=D,__reflect(D.prototype,"moon.GameData");var A=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=n.Plum,t}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.createBgGradientFill();var i=new Sprite;this.addChild(i);var n=this.stageWidth,r=this.stageHeight,o=80,s=a.RoundRect(n-100,o,16573853,100,100);s.x=n-s.width>>1,s.y=r-s.height>>1,i.addChild(s);var h=a.RoundRect(n-120,o-10,this.color,100,100);h.x=n-h.width>>1,h.y=r-h.height>>1,i.addChild(h),this.proWidth=h.width;var l=a.RoundRect(n-120,o-10,0,100,100);l.x=n-l.width>>1,l.y=r-l.height>>1,h.mask=l,this.progress=h,i.addChild(l);var c=new u;c.type=t.Const.SHAPE_CIRCLE,c.data={r:o/2,c:14781965},c.setBackground(16777215,5),this.addChild(c),c.x=s.x+s.width-o/2,c.y=s.y+o/2,this.txtLoadPos=new Point(c.x,c.y);var d=this.createText(0,0,"");d.size=40,d.textColor=11563776,this.txtLoad=d;var p=this.createText(0,0,"加载中...");p.size=40,p.x=n-p.width>>1,p.y=s.y-2*p.height,this.createAirFan(),this.airFan.x=c.x,this.airFan.y=c.y,this.update(0),this.play()},i.prototype.loop=function(t){return this.airFan.rotation+=3,!0},i.prototype.createAirFan=function(){this.airFan=new Sprite,this.addChild(this.airFan);for(var t=0;4>t;t++){var e=new Sprite;this.airFan.addChild(e),e.graphics.lineStyle(0),e.graphics.beginFill(16777215),e.graphics.cubicCurveTo(-29,-28,29,-28,0,0),e.graphics.endFill(),e.rotation=90*t}},i.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=n.Blue),void 0===e&&(e=n.BlueViolet);var i=this.stageWidth,r=this.stageHeight,o=new egret.Matrix;o.createGradientBox(2*i,2*r,Math.PI/2);var a=new Sprite;return a.graphics.beginGradientFill(egret.GradientType.RADIAL,[t,e],[1,1],[0,255],o),a.graphics.drawRect(0,0,i,r),this.addChild(a),a},i.prototype.update=function(t){if(!(t>1)){t>.99&&this.stop(),this.progress.scaleX=t;var e=this.txtLoad,i=this.txtLoadPos;e.text=Math.ceil(100*t)+"%",e.x=this.stageWidth-e.width>>1,e.y=i.y-e.height/2;var n=a.Circle(5+5*Math.random(),this.color,i.x,i.y);n.y=10-20*Math.random(),this.addChildAt(n,2),Tween.get(n).to({x:-this.proWidth,alpha:0},1e3)}},i}(t.GameView);t.GameLoad=A,__reflect(A.prototype,"moon.GameLoad")}(moon||(moon={}));var XColor=function(){function t(){}return Object.defineProperty(t,"random",{get:function(){return 16777215*Math.random()},enumerable:!0,configurable:!0}),t.getRandomArray=function(e){for(var i=[],n=0;e>n;n++)i.push(t.random);return i},t.setColorBrightness=function(t,e){var i=(t>>16)+e;i>255?i=255:0>i&&(i=0);var n=(t>>8&255)+e;n>255?n=255:0>n&&(n=0);var r=(255&t)+e;return r>255?r=255:0>r&&(r=0),r|n<<8|i<<16},t.LightPink=16758465,t.Pink=16761035,t.Crimson=14423100,t.LavenderBlush=16773365,t.PaleVioletRed=14381203,t.HotPink=16738740,t.DeepPink=16716947,t.MediumVioletRed=13047173,t.Orchid=14315734,t.Thistle=14204888,t.Plum=14524637,t.Violet=15631086,t.Magenta=16711935,t.Fuchsia=16711935,t.DarkMagenta=9109643,t.Purple=8388736,t.MediumOrchid=12211667,t.DarkVoilet=9699539,t.DarkOrchid=10040012,t.Indigo=4915330,t.BlueViolet=9055202,t.MediumPurple=9662683,t.MediumSlateBlue=8087790,t.SlateBlue=6970061,t.DarkSlateBlue=4734347,t.Lavender=15132410,t.GhostWhite=16316671,t.Blue=255,t.MediumBlue=205,t.MidnightBlue=1644912,t.DarkBlue=139,t.Navy=128,t.RoyalBlue=4286945,t.CornflowerBlue=6591981,t.LightSteelBlue=11584734,t.LightSlateGray=7833753,t.SlateGray=7372944,t.DoderBlue=2003199,t.AliceBlue=15792383,t.SteelBlue=4620980,t.LightSkyBlue=8900346,t.SkyBlue=8900331,t.DeepSkyBlue=49151,t.LightBlue=11393254,t.PowDerBlue=11591910,t.CadetBlue=6266528,t.Azure=15794175,t.LightCyan=14811135,t.PaleTurquoise=11529966,t.Cyan=65535,t.Aqua=65535,t.DarkTurquoise=52945,t.DarkSlateGray=3100495,t.DarkCyan=35723,t.Teal=32896,t.MediumTurquoise=4772300,t.LightSeaGreen=2142890,t.Turquoise=4251856,t.Auqamarin=8388522,t.MediumAquamarine=64154,t.MediumSpringGreen=16121850,t.MintCream=65407,t.SpringGreen=3978097,t.SeaGreen=3050327,t.Honeydew=15794160,t.LightGreen=9498256,t.PaleGreen=10025880,t.DarkSeaGreen=9419919,t.LimeGreen=3329330,t.Lime=65280,t.ForestGreen=2263842,t.Green=32768,t.DarkGreen=25600,t.Chartreuse=8388352,t.LawnGreen=8190976,t.GreenYellow=11403055,t.OliveDrab=5597999,t.Beige=7048739,t.LightGoldenrodYell=16448210,t.Ivory=16777200,t.LightYellow=16777184,t.Yellow=16776960,t.Olive=8421376,t.DarkKhaki=12433259,t.LemonChiffon=16775885,t.PaleGodenrod=15657130,t.Khaki=15787660,t.Gold=16766720,t.Cornislk=16775388,t.GoldEnrod=14329120,t.FloralWhite=16775920,t.OldLace=16643558,t.Wheat=16113331,t.Moccasin=16770229,t.Orange=16753920,t.PapayaWhip=16773077,t.BlanchedAlmond=16772045,t.NavajoWhite=16768685,t.AntiqueWhite=16444375,t.Tan=13808780,t.BrulyWood=14596231,t.Bisque=16770244,t.DarkOrange=16747520,t.Linen=16445670,t.Peru=13468991,t.PeachPuff=16767673,t.SandyBrown=16032864,t.Chocolate=13789470,t.SaddleBrown=9127187,t.SeaShell=16774638,t.Sienna=10506797,t.LightSalmon=16752762,t.Coral=16744272,t.OrangeRed=16729344,t.DarkSalmon=15308410,t.Tomato=16737095,t.MistyRose=16770273,t.Salmon=16416882,t.Snow=16775930,t.LightCoral=15761536,t.RosyBrown=12357519,t.IndianRed=13458524,t.Red=16711680,t.Brown=10824234,t.FireBrick=11674146,t.DarkRed=9109504,t.Maroon=8388608,t.White=16777215,t.WhiteSmoke=16119285,t.Gainsboro=14474460,t.LightGrey=13882323,t.Silver=12632256,t.DarkGray=11119017,t.Gray=8421504,t.DimGray=6908265,t.Black=0,t}();__reflect(XColor.prototype,"XColor");var Label=function(t){function e(e,i,n){void 0===i&&(i=""),void 0===n&&(n="");var r=t.call(this)||this;return r.pre="",r.post="",r.str=e,r.pre=i,r.post=n,r.text=i+e+n,r.textAlign=egret.HorizontalAlign.CENTER,r.verticalAlign=egret.VerticalAlign.MIDDLE,r.multiline=!0,r}return __extends(e,t),Object.defineProperty(e.prototype,"intVal",{get:function(){return parseInt(this.str)},set:function(t){this.str=t.toString(),this.text=this.pre+this.str+this.post},enumerable:!0,configurable:!0}),e}(egret.TextField);__reflect(Label.prototype,"Label");var ButtonShape;!function(t){t[t.SHP_ROUNDRECT=0]="SHP_ROUNDRECT",t[t.SHP_RECT=1]="SHP_RECT",t[t.SHP_CIRCLE=2]="SHP_CIRCLE"}(ButtonShape||(ButtonShape={}));var Button=function(t){function e(i,n,r,o){void 0===n&&(n=e.defWidth),void 0===r&&(r=e.defHeight),void 0===o&&(o=e.defColor);var a=t.call(this)||this;return a.width=n,a.height=r,a.bgColor=o,a.label=new Label(i),a.label.width=n,a.label.height=r,a.bg=XUI.RoundRect(n,r,o),a.shape=ButtonShape.SHP_ROUNDRECT,a.once(egret.Event.ADDED_TO_STAGE,a.addToStage,a),a}return __extends(e,t),e.prototype.addToStage=function(){this.enable(),this.draw()},e.prototype.draw=function(){this.removeChildren(),this.addChild(this.bg),this.addChild(this.label)},e.prototype.enable=function(){this.disable(),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.setGray(!1)},e.prototype.disable=function(){this.touchEnabled=!1,this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouch,this),this.stage&&this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.setGray(!0)},Object.defineProperty(e.prototype,"size",{set:function(t){this.width=t[0]||e.defWidth,this.height=t[1]||e.defHeight,this.label.width=this.shape==ButtonShape.SHP_CIRCLE?this.height:this.width,this.label.height=this.height,this.draw()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{set:function(t){this.label.textColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text=t},enumerable:!0,configurable:!0}),e.prototype.setStyle=function(t,e,i,n,r){switch(void 0===e&&(e=XColor.DeepSkyBlue),void 0===i&&(i=!1),void 0===n&&(n=250),void 0===r&&(r=60),t){case ButtonShape.SHP_ROUNDRECT:i?this.bg=XUI.LineRoundRect(n,r,e):this.bg=XUI.RoundRect(n,r,e);break;case ButtonShape.SHP_RECT:i?this.bg=XUI.LineRect(n,r,e):this.bg=XUI.Rect(n,r,e);break;case ButtonShape.SHP_CIRCLE:i?(this.bg=XUI.LineCircle(r,e),this.bg.x=this.bg.y=r/2):(this.bg=XUI.Circle(r,e),this.bg.x=this.bg.y=r/2)}this.shape=t,this.size=[n,r],this.bgColor=e,this.draw()},e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN?(this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.scaleX=this.scaleY=.95,this.x+=2,this.y+=2):(this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouch,this),this.scaleX=this.scaleY=1,this.x-=2,this.y-=2)},e.prototype.setGray=function(t){t?this.filters=[new egret.ColorMatrixFilter([.3,.6,.08,0,0,.3,.6,.08,0,0,.3,.6,.08,0,0,0,0,0,1,0])]:this.filters=null},e.defWidth=250,e.defHeight=60,e.defColor=XColor.DeepSkyBlue,e}(DisplayObjectContainer);__reflect(Button.prototype,"Button");var Switch=function(t){function e(e){void 0===e&&(e=!0);var i=t.call(this,"")||this;return i.isEnable=!0,i.isEnable=e,i.isEnable?i.bg=XUI.Switch(XColor.SkyBlue,XColor.White,1):i.bg=XUI.Switch(XColor.Gray,XColor.White,0),i}return __extends(e,t),e.prototype.onTouch=function(t){t.type==egret.TouchEvent.TOUCH_BEGIN&&(this.isEnable=!this.isEnable,this.isEnable?this.bg=XUI.Switch(XColor.SkyBlue,XColor.White,1):this.bg=XUI.Switch(XColor.Gray,XColor.White,0),this.draw())},e}(Button);__reflect(Switch.prototype,"Switch");var Tip=function(t){function e(e,i){void 0===i&&(i=2e3);var n=t.call(this)||this;return n.text=new Label(e),n.closeTime=i,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onAddToStage,n),n}return __extends(e,t),e.prototype.onAddToStage=function(t){var e=XUI.RoundRect(300,60,XColor.Gray);this.addChild(e),this.text.x=(300-this.text.width)/2,this.text.y=(60-this.text.height)/2,this.addChild(this.text),this.x=(this.stage.stageWidth-this.width)/2,this.y=(this.stage.stageHeight-this.height)/2,Tween.get(this).to({alpha:.9},200).wait(200).to({alpha:0},this.closeTime-200).call(this.callback,this)},e.prototype.callback=function(){Tween.removeTweens(this),this.parent&&this.parent.removeChild(this)},e}(Sprite);__reflect(Tip.prototype,"Tip");var XUI=function(){function t(){}return t.TickMark=function(t){void 0===t&&(t=XColor.Green);var e=new Sprite,i=e.graphics;return i.beginFill(3355443,.7),i.lineStyle(2,2434341),i.drawCircle(0,0,20),i.endFill(),i.lineStyle(4,t),i.moveTo(-10,-3),i.lineTo(-2,8),i.lineTo(10,-8),e},t.ErrorMark=function(t){void 0===t&&(t=XColor.Red);
var e=new Sprite,i=e.graphics;return i.beginFill(3355443,.7),i.lineStyle(2,2434341),i.drawCircle(0,0,20),i.endFill(),i.lineStyle(4,t),i.moveTo(-8,-8),i.lineTo(8,8),i.moveTo(-8,8),i.lineTo(8,-8),e},t.LineRect=function(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0);var a=new Sprite;return a.graphics.lineStyle(n,i),a.graphics.drawRect(r,o,t,e),a.graphics.endFill(),a},t.RoundRect=function(t,e,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=25),void 0===r&&(r=25),void 0===o&&(o=0),void 0===a&&(a=0);var s=new Sprite;return s.graphics.beginFill(i),s.graphics.drawRoundRect(o,a,t,e,n,r),s.graphics.endFill(),s},t.LineRoundRect=function(t,e,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=25),void 0===r&&(r=25),void 0===o&&(o=0),void 0===a&&(a=0);var s=new Sprite;return s.graphics.lineStyle(1,i),s.graphics.drawRoundRect(o,a,t,e,n,r),s},t.Circle=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;return r.graphics.beginFill(e),r.graphics.drawCircle(i,n,t),r.graphics.endFill(),r},t.Switch=function(e,i,n){void 0===e&&(e=16777215),void 0===i&&(i=0),void 0===n&&(n=0);var r=t.RoundRect(80,50,e,60,60);return r.addChild(t.Circle(22,i,0==n?25:55,25)),r},t.LineCircle=function(t,e,i,n,r){void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;return o.graphics.lineStyle(i,e),o.graphics.drawCircle(n,r,t),o.graphics.endFill(),o},t.MatrixRect=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite,a=new egret.Matrix;return a.createGradientBox(t,e,Math.PI*r,0,0),o.graphics.beginGradientFill(egret.GradientType.LINEAR,[i,n],[1,1],[0,255],a),o.graphics.drawRect(0,0,t,e),o.graphics.endFill(),o},t.Rect=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;return o.graphics.beginFill(i),o.graphics.drawRect(n,r,t,e),o.graphics.endFill(),o},t.RectAndX=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0);var o=this.Rect(t,e,i,n,r);return o.addChild(this.CloseButton(t,e,i,1,n,r)),o},t.CloseButton=function(t,e,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=0);var a=new Sprite,s=new Sprite;s.graphics.lineStyle(n,i),s.graphics.moveTo(0,0),s.graphics.lineTo(t,e);var h=new Sprite;return h.graphics.lineStyle(n,i),h.graphics.moveTo(t,0),h.graphics.lineTo(0,e),a.addChild(s),a.addChild(h),a},t.Polygon=function(t,e,i,n){void 0===t&&(t=3),void 0===e&&(e=10),void 0===i&&(i=0),void 0===n&&(n=0);var r=new Sprite;r.rotation=n,r.graphics.beginFill(i);for(var o=0;t>=o;o++){var a=Math.cos(o*(360/t)*Math.PI/180)*e,s=Math.sin(o*(360/t)*Math.PI/180)*e;0==o?r.graphics.moveTo(a,s):r.graphics.lineTo(a,s)}return r.graphics.endFill(),r},t.ArrowRoundRect=function(t,e,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var o=new Sprite;o.addChild(this.RoundRect(t,e,i));var a=this.Polygon(3,t/3,n,30+r);return a.x=o.width>>1,a.y=o.height>>1,o.addChild(a),o},t.ScrollLineBar=function(t,e,i){for(var n=new Sprite,r=e/3,o=0;3>o;o++){var a=this.Rect(t,1,i,0,o*r);n.addChild(a)}return n},t.AddRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.RoundRect(t,e,i));var r=this.Rect(t/2,2,0,t/4,e/2-1),o=this.Rect(2,e/2,0,t/2-1,e/4);return n.addChild(r),n.addChild(o),n},t.RemoveRoundRect=function(t,e,i){var n=new Sprite;n.addChild(this.RoundRect(t,e,i));var r=this.Rect(t/2,2,0,t/4,e/2-1);return n.addChild(r),n},t.RoundRectText=function(t,e,i,n){void 0===n&&(n="click");var r=new Sprite;r.addChild(this.RoundRect(t,e,i));var o=new TextField;return o.name="text",o.text=n,o.x=r.width-o.width>>1,o.y=r.height-o.height>>1,r.addChild(o),r},t.CheckBoxRect=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.Rect(40,40,t)),1==i){var r=new Sprite;r.graphics.beginFill(e),r.graphics.moveTo(0,20),r.graphics.lineTo(20,36),r.graphics.lineTo(44,8),r.graphics.lineTo(36,0),r.graphics.lineTo(20,18),r.graphics.lineTo(12,8),r.graphics.lineTo(0,20),n.addChild(r)}return n},t.RadioCircle=function(t,e,i){void 0===t&&(t=16777215),void 0===e&&(e=0),void 0===i&&(i=0);var n=new Sprite;if(n.addChild(this.Circle(16,t,16,16)),n.graphics.lineStyle(1,0),1==i){var r=this.Circle(8,e,16,16);n.addChild(r)}return n},t.Gridding=function(t,e){void 0===e&&(e=0);var i=new Sprite;i.graphics.lineStyle(.1,e);for(var n=t.width/t.x,r=t.height/t.y,o=0;o<t.x;o++)i.graphics.moveTo(0,o*r),i.graphics.lineTo(t.width,o*r);for(var o=0;o<t.y;o++)i.graphics.moveTo(o*n,0),i.graphics.lineTo(o*n,t.height);return i},t.Heart=function(t,e){void 0===t&&(t=15),void 0===e&&(e=16711680);var i=new Sprite;return i.graphics.beginFill(e),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(t,2.5*-t,2*t,1.5*-t,0,0),i.graphics.moveTo(0,0),i.graphics.lineTo(0,2*-t),i.graphics.cubicCurveTo(-t,2.5*-t,2*-t,1.5*-t,0,0),i.graphics.endFill(),i.anchorOffsetX=-i.width/2,i.anchorOffsetY=-i.height,i},t}();__reflect(XUI.prototype,"XUI");var Theme=function(){function t(){}return Object.defineProperty(t,"btnNormal",{get:function(){return XUI.RoundRect(200,60,t.btnColorNormal)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"btnDown",{get:function(){return XUI.RoundRect(200,60,t.btnColorDown)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"switchOn",{get:function(){return XUI.Switch(t.btnColorNormal,XColor.White,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"switchOff",{get:function(){return XUI.Switch(t.swithColorOff,XColor.White)},enumerable:!0,configurable:!0}),t.btnColorNormal=XColor.DeepSkyBlue,t.btnColorDown=XColor.LightSteelBlue,t.swithColorOff=XColor.Gray,t}();__reflect(Theme.prototype,"Theme");var Container=function(t){function e(){var e=t.call(this)||this;return e.dataEvent=new Object,e.init(),e.once(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.render()},e.prototype.init=function(){},e.prototype.render=function(){this.stageWidth=this.stage.stageWidth,this.stageHeight=this.stage.stageHeight},e.prototype.createBgGradientFill=function(t,e){void 0===t&&(t=XColor.Blue),void 0===e&&(e=XColor.BlueViolet);var i=this.stageWidth,n=this.stageHeight,r=new egret.Matrix;r.createGradientBox(2*i,2*n,Math.PI/2);var o=new Sprite;return o.graphics.beginGradientFill(egret.GradientType.RADIAL,[t,e],[1,1],[0,255],r),o.graphics.drawRect(0,0,i,n),this.addChild(o),o},e.prototype.dispEvent=function(t,e,i){if(void 0===e&&(e=null),void 0===i&&(i=null),this.dataEvent){var n=this.dataEvent[t];if(null!=n){var r=new MoonEvent;r.currentTarget=this,r.data=e,r.type=t,r.dataType=i,n["this"]?n.apply(n["this"],[r]):n(r)}}},e.prototype.addEvent=function(t,e,i){void 0===i&&(i=null),this.dataEvent&&null==this.dataEvent[t]&&(e["this"]=i,this.dataEvent[t]=e)},e.prototype.removeEvent=function(t,e){this.dataEvent&&this.dataEvent[t]&&delete this.dataEvent[t]},e.prototype.removeFromParent=function(t){void 0===t&&(t=!1);var e=this.parent;t&&this.dispose(),e&&e.contains(this)&&e.removeChild(this),e=null},e.prototype.removeChildren=function(t){for(void 0===t&&(t=!1);this.numChildren>0;)this.removeChildIndex(0,t)},e.prototype.removeChildIndex=function(t,i){if(t>=0||t<this.numChildren){var n=this.getChildAt(t);if(n instanceof e)n.removeFromParent(i);else{var r=this.getChildAt(t);r.parent&&r.parent.removeChild(r)}}},e.prototype.dispose=function(){this.removeChildren(!0),this.dataEvent=null,this.stageWidth=null,this.stageHeight=null},e}(egret.DisplayObjectContainer);__reflect(Container.prototype,"Container");var Layout=function(){function t(){}return t.placeCenter=function(t,e){e.x=(t.stage.stageWidth-e.width)/2,e.y=(t.stage.stageHeight-e.height)/2,t.addChild(e)},t.place=function(t,e,i,n){e.x=i,e.y=n,t.addChild(e)},t}();__reflect(Layout.prototype,"Layout");var Dialog=function(t){function e(e){var i=t.call(this)||this;return i.bgColor=XColor.LightBlue,i.bgAlpha=.9,i.dlgBorderColor=XColor.White,i.dlgBgColor=XColor.Gray,i.dlgWidth=400,i.dglHeight=300,i.text=new Label(e),i}return __extends(e,t),e.prototype.init=function(){},e.prototype.render=function(){var t=this;this.touchEnabled=!0;var e=XUI.Rect(this.stage.stageWidth,this.stage.stageHeight,this.bgColor);e.alpha=this.bgAlpha,this.addChild(e);var i=XUI.LineRoundRect(this.dlgWidth,this.dglHeight,this.dlgBorderColor);Layout.placeCenter(this,i);var n=XUI.RoundRect(this.dlgWidth,this.dglHeight,this.dlgBgColor);Layout.placeCenter(this,n),this.dlgBG=n;var r=this.text;r.width=400,r.height=200,n.addChild(r);var o=new Button("确定");o.x=(n.width-o.width)/2,o.y=220,n.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){t.parent.removeChild(t)},this)},e}(Container);__reflect(Dialog.prototype,"Dialog");var UIPage=function(t){function e(e){void 0===e&&(e="");var i=t.call(this)||this;return i.title=new Label(e),i.retBtn=new Button("返回"),i}return __extends(e,t),e.prototype.render=function(){var t=XUI.Rect(this.stage.stageWidth,this.stage.stageHeight,XColor.DimGray);t.alpha=.9,this.addChild(t),this.title.height=60,this.title.width=this.stage.stageWidth-100,this.retBtn.setStyle(ButtonShape.SHP_ROUNDRECT,XColor.LightSlateGray,!0,90,50),this.retBtn.x=5,this.retBtn.y=5,this.titleBar=XUI.Rect(this.stage.stageWidth,60,XColor.SlateGray),this.titleBar.alpha=.8,this.titleBar.addChild(this.title),this.titleBar.addChild(this.retBtn),this.retBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.redraw()},e.prototype.redraw=function(){""!=this.title.str&&this.addChild(this.titleBar)},e.prototype.onReturn=function(t){this.parent.removeChild(this),this.dispEvent(moon.MoonEvent.CLOSE)},e}(Container);__reflect(UIPage.prototype,"UIPage");var LoadingPage=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addToStage,e),e}return __extends(e,t),e.prototype.addToStage=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addToStage,this),this.gameLoad=new moon.GameLoad,this.addChild(this.gameLoad)},e.prototype.onProgress=function(t,e){this.gameLoad.update(t/e)},e}(egret.Sprite);__reflect(LoadingPage.prototype,"LoadingPage",["RES.PromiseTaskReporter"]);var CoverPage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),moon.GameMoon.init(this.stage),this.createBgGradientFill(MColor.Blue,MColor.BlueViolet);var e=MColor.Yellow,i=.9,n=50,r=50,o=3,a=new egret.GlowFilter(e,i,n,r,1,o),s=new egret.TextField;s.size=48,s.text="鉴别色块",s.filters=[a],s.textColor=MColor.DeepSkyBlue,this.addChild(s);var h=Tween.get(s);h.to({y:200,x:(this.stageWidth-s.width)/2},2e3,Ease.sineOut);for(var l=["开始游戏","游戏设置","排 行 榜","游戏说明"],c=0;c<l.length;c++){var u=new Button(l[c]);u.name=c.toString(),u.x=(this.stageWidth-u.width)/2,u.y=350+100*c,u.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this),this.addChild(u)}this.father=this.parent,this.bgm=RES.getRes("bg_mp3"),this.bgm.play().volume=1},e.prototype.click=function(t){var e=t.currentTarget,i=this;switch(parseInt(e.name)){case 0:this.removeFromParent(),i=new SelectColorPanel("鉴别色块");break;case 1:i=new GameSetDlg("");break;case 2:this.removeFromParent(),i=new GameRankPage("排行榜");break;case 3:this.removeFromParent(),i=new TestPage("说明")}this.father.addChild(i),i.addEvent(moon.MoonEvent.CLOSE,this.onClose,this)},e.prototype.onClose=function(t){this.father.addChild(this)},e}(Container);__reflect(CoverPage.prototype,"CoverPage");var SelectColorPanel=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.select=0,e.level=2,e.value=50,e.touch_music=RES.getRes("fire_mp3"),e.score=new Label("0","得分: "),e.highScores=[],e}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.score.x=100,this.score.y=100,this.addChild(this.score),this.board=new Sprite,this.addChild(this.board);var e=GameData.localRead("score")||"[]";this.highScores=JSON.parse(e),this.createLevel()},e.prototype.createColors=function(){for(var t=this.level,e=t*t,i=(this.stage.stageWidth-100)/t,n=XColor.random,r=XColor.setColorBrightness(n,this.value),o=Math.floor(Math.random()*e),a=[],s=0;e>s;s++){var h=XUI.RoundRect(i,i,s==o?r:n);h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onColor,this),h.name=""+s,this.board.addChild(h),a.push(h)}var l=this.stage.stageWidth-(i+5)*t>>1;moon.SimpleLayout.displayRank(a,t,5,5,l,300),this.select=o},e.prototype.onColor=function(t){this.touch_music.play(0,1).volume=1;var e=t.currentTarget;e.name==this.select.toString()?(this.createLevel(),this.score.intVal++):(this.highScores.push(this.score.intVal),this.highScores.sort(function(t,e){return e-t}),this.highScores=this.highScores.slice(0,10),GameData.localWrite("score",JSON.stringify(this.highScores)),console.log(JSON.stringify(this.highScores)),this.score.intVal=0)},e.prototype.createLevel=function(){this.value-=2,this.board.removeChildren(),this.createColors(),this.level++,this.level>7&&(this.level=7)},e}(UIPage);__reflect(SelectColorPanel.prototype,"SelectColorPanel");var TestPage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this);var e=new Label("pick the different color!!");Layout.placeCenter(this,e)},e}(UIPage);__reflect(TestPage.prototype,"TestPage");var MOON_FTP=24,moon;!function(t){var e=function(e){function i(t){void 0===t&&(t="");var i=e.call(this)||this;return""!=t&&(i.skinName=t,i.position=new Point,i.addBitmap(),i.bgWidth=i.width,i.bgHeight=i.height),i}return __extends(i,e),i.prototype.addBitmap=function(){RES.hasRes(this.skinName)?(this.skinImage=new t.Scale9Image(this.skinName),this.addChild(this.skinImage)):trace("找不到资源："+this.skinName)},i.prototype.setAnchorCenter=function(){this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1},i}(t.MoonContainer);t.Image=e,__reflect(e.prototype,"moon.Image");var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.items=[],e.index=0,e}return __extends(e,t),e.prototype.reset=function(){this.index=0},e.prototype.addItem=function(t){this.items.push(t)},e.prototype.removeItem=function(t){this.hasItem(t)&&this.items.splice(t,1)},e.prototype.getItem=function(t){return this.items[t]},e.prototype.hasItem=function(t){return this.items.length>0&&t>=0&&t<this.items.length},Object.defineProperty(e.prototype,"hasNextItem",{get:function(){return this.hasItem(this.index)},enumerable:!0,configurable:!0}),e.prototype.getNextItem=function(){return this.items[this.index++]},e.prototype.getIndexByItem=function(t){return this.items.indexOf(t)},Object.defineProperty(e.prototype,"itemsLength",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currIndex",{get:function(){return this.index},enumerable:!0,configurable:!0}),e.prototype.removeAll=function(){for(;this.hasItem(0);){var t=this.getItem(0);t.parent&&t.parent.removeChild(t),this.removeItem(0)}},e}(e);t.BasicContainer=i,__reflect(i.prototype,"moon.BasicContainer");var n=function(e){function i(t,i){void 0===i&&(i=1);var n=e.call(this)||this;n.skinName=t;for(var r=0;i>r;r++)n.items.push(n.getBitmap());return n}return __extends(i,e),i.prototype.getBitmap=function(){var e;return RES.hasRes(this.skinName)?(e=new t.Scale9Image(this.skinName),this.addChild(e)):trace("找不到资源："+this.skinName),e},i.prototype.layout=function(e,i){void 0===i&&(i=0),e==t.Const.VERTICAL?t.SimpleLayout.displayRank(this.items,1,i,i,0,0):e==t.Const.HORIZONTAL&&t.SimpleLayout.displayRank(this.items,this.items.length,i,i,0,0)},i.prototype.setMultiLine=function(e,i){void 0===i&&(i=0),t.SimpleLayout.displayRank(this.items,e,i,i,0,0)},i}(i);t.ImageChartlet=n,__reflect(n.prototype,"moon.ImageChartlet",["moon.ILayout"]);var r=function(e){function i(t,i){void 0===i&&(i=1);var n=e.call(this,t,i)||this;for(n.speed=4,n.head=n.items[0],n.addChild(n.head),n.reset();n.hasItem(n.index);){var r=n.getNextItem();r.alpha=(n.itemsLength-(n.index-1))/n.itemsLength}return egret.startTick(n.loop,n),n}return __extends(i,e),i.prototype.update=function(t,e){this.head.x+=t,this.head.y+=e},i.prototype.loop=function(e){var i=this.items.length-1,n=this.items[i];if(t.GameUtils.twoDistance(this.headItem,n)>.1)for(var r=this.speed,o=0;i>o;o++){var a=this.items[o],s=this.items[o+1];s.x+=(a.x-s.x)/r,s.y+=(a.y-s.y)/r}return!0},Object.defineProperty(i.prototype,"headItem",{get:function(){return this.head},enumerable:!0,configurable:!0}),i}(n);t.ImageFollow=r,__reflect(r.prototype,"moon.ImageFollow");var o=function(e){function i(t){var i=e.call(this,t,2)||this;return i._speed=-5,i.layout(),i}return __extends(i,e),Object.defineProperty(i.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),i.prototype.layout=function(e,i){for(void 0===e&&(e=t.Const.HORIZONTAL),void 0===i&&(i=-1),this.type=e,this.reset();this.hasItem(this.index);){var n=this.getItem(this.index);n.x=n.y=0,e==t.Const.HORIZONTAL?0>i?n.x=this.index*n.width:n.x=this.index*n.width*-1:0>i?n.y=this.index*n.height:n.y=this.index*n.height*-1,this.index++}},i.prototype.play=function(){egret.startTick(this.loop,this)},i.prototype.stop=function(){egret.stopTick(this.loop,this)},i.prototype.loop=function(e){for(var i=this.items.length,n=0;i>n;n++){var r=this.items[n];if(this.type==t.Const.HORIZONTAL){if(r.x+=this.speed,this.speed<0){if(r.x<=-r.width){var o=r.x+r.width;r.x=r.width+o}}else if(r.x>=r.width){var o=r.x-r.width;r.x=-r.width+o}}else if(r.y+=this.speed,this.speed<0){if(r.y<=-r.height){var a=r.y+r.height;r.y=r.height+a}}else if(r.y>=r.height){var a=r.y-r.height;r.y=-r.height+a}}return!0},i}(n);t.ImageLoopPlay=o,__reflect(o.prototype,"moon.ImageLoopPlay");var a=function(t){function e(e,i,n,r){void 0===e&&(e=""),void 0===r&&(r="png");var o=t.call(this)||this;o._ftp=MOON_FTP;for(var a=i;n>=a;a++)o.items.push(e+a+"_"+r);return o.skinName=o.getItem(0),o.addBitmap(),o.createTime(),o}return __extends(e,t),e.prototype.createTime=function(){null==this.timer&&(this.timer=new egret.Timer(1e3/this.ftp,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this))},e.prototype.onTimer=function(){this.hasItem(++this.index)?this.gotoAndStop(this.index):this.loop?(this.reset(),this.gotoAndStop(this.index)):this.timer.stop()},e.prototype.gotoAndStop=function(t){this.hasItem(t)?(this.index=t,this.skinName=this.getItem(t),this.update()):trace("gotoAndStop的参数请保持在0到"+this.items.length,"当前index="+t)},e.prototype.gotoAndPlay=function(t){this.index=t,this.play()},e.prototype.play=function(){this.timer.start()},e.prototype.stop=function(){this.timer.stop()},e.prototype.update=function(){RES.hasRes(this.skinName)?this.skinImage.texture=RES.getRes(this.skinName):trace("找不到资源："+this.skinName)},Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ftp",{get:function(){return this._ftp},set:function(t){this._ftp=t,this.removeTime(),this.createTime()},enumerable:!0,configurable:!0}),e.prototype.removeTime=function(){null!=this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.timer=null)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.removeTime()},e}(i);t.ImageAnimation=a,__reflect(a.prototype,"moon.ImageAnimation");var s=function(){function t(){}return t.getIns=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setImage=function(t){this.image=t},t.prototype.setStageWH=function(t,e){this.tw=t,this.th=e},t.prototype.setTop=function(t){this.image.y=t},t.prototype.setBottom=function(t){this.image.y=this.th-this.image.height-t},t.prototype.setLeft=function(t){this.image.x=t},t.prototype.setRight=function(t){this.image.x=this.tw-this.image.width-t},t.prototype.setCenterX=function(t){void 0===t&&(t=0),this.image.x=(this.tw-this.image.width>>1)+t},t.prototype.setCenterY=function(t){void 0===t&&(t=0),this.image.y=(this.tw-this.image.width>>1)+t},t.prototype.setCenterXByPanent=function(t){t.parent instanceof e?t.x=t.parent.bgWidth-t.width>>1:t.x=t.parent.width-t.width>>1},t.prototype.setCenterYByPanent=function(t){t.parent instanceof e?t.y=t.parent.bgHeight-t.height>>1:t.y=t.parent.height-t.height>>1},t}();t.ImageLayout=s,__reflect(s.prototype,"moon.ImageLayout")}(moon||(moon={}));var GameData=function(){function t(){}return t.gameKey=function(e){return t.gameID+e},t.localWrite=function(t,e){egret.localStorage.setItem(this.gameKey(t),e)},t.localRead=function(t){return egret.localStorage.getItem(this.gameKey(t))},t.localRemove=function(t){egret.localStorage.removeItem(this.gameKey(t))},t.localClear=function(){egret.localStorage.clear()},t.gameID="COLOR_PICKER_",t}();__reflect(GameData.prototype,"GameData");var GameRankPage=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.data=[],e.dataLabels=[],e}return __extends(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.bg=XUI.Rect(500,800,XColor.DarkSlateBlue),this.bg.alpha=.8,this.bg.x=(this.stage.stageWidth-this.bg.width)/2,this.bg.y=(this.stage.stageHeight-this.bg.height)/2,this.addChild(this.bg),this.closeBtn=new Button(""),this.closeBtn.bg=XUI.ErrorMark(),this.closeBtn.x=565,this.closeBtn.y=165,this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturn,this),this.addChild(this.closeBtn);for(var e=1;10>=e;e++){var i=new Label(e.toString());i.x=100,i.y=75*e,this.bg.addChild(i)}var n=GameData.localRead("score")||"[]";this.data=JSON.parse(n);for(var e=0;10>e;e++){var r=this.data[e]||0,i=new Label(r.toString());i.x=300,i.y=75*(e+1),this.bg.addChild(i),this.dataLabels[e]=i}},e.prototype.setData=function(t){this.data=t,this.bg&&this.draw()},e.prototype.draw=function(){for(var t=0;10>t;t++){var e=this.data[t]||0;this.dataLabels[t].text=e.toString()}},e}(UIPage);__reflect(GameRankPage.prototype,"GameRankPage");var GameSetDlg=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isBgmOn=!0,e.isMusicEffectOn=!0,e}return __extends(e,t),e.prototype.render=function(){this.dlgBgColor=XColor.DarkSeaGreen;var e=GameData.localRead("bgm");e&&(this.isBgmOn="true"===e);var i=GameData.localRead("music_effect");i&&(this.isMusicEffectOn="true"===i),t.prototype.render.call(this);var n=new Label("背景音乐"),r=new Label("游戏音效"),o=new Switch(this.isBgmOn),a=new Switch(this.isMusicEffectOn);o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSwitchClick,this),a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSwitchClick,this),this.bgm=o,this.musicEffect=a,Layout.place(this.dlgBG,n,50,50),Layout.place(this.dlgBG,r,50,150),Layout.place(this.dlgBG,o,300,50),Layout.place(this.dlgBG,a,300,150)},e.prototype.onSwitchClick=function(t){var e=t.currentTarget;e===this.bgm?GameData.localWrite("bgm",e.isEnable?"true":"false"):e===this.musicEffect&&GameData.localWrite("music_effect",e.isEnable?"true":"false")},e}(Dialog);__reflect(GameSetDlg.prototype,"GameSetDlg");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){egret.Capabilities.isMobile?this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL,egret.lifecycle.addLifecycleListener(function(t){t.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t=new LoadingPage,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 2:return i.sent(),this.stage.removeChild(t),[3,4];case 3:return e=i.sent(),console.error(e),[3,4];case 4:return[2]}})})},e.prototype.createGameScene=function(){this.addChild(new CoverPage)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var MButton=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicButton);__reflect(MButton.prototype,"MButton");var MBasicView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicView);__reflect(MBasicView.prototype,"MBasicView");var MImage=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Image);__reflect(MImage.prototype,"MImage");var MContainer=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicContainer);__reflect(MContainer.prototype,"MContainer");var MAnimation=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageAnimation);__reflect(MAnimation.prototype,"MAnimation");var MChartlet=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageChartlet);__reflect(MChartlet.prototype,"MChartlet");var MFollow=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageFollow);__reflect(MFollow.prototype,"MFollow");var MILayout=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.ImageLayout);__reflect(MILayout.prototype,"MILayout");var MSLayout=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.SimpleLayout);__reflect(MSLayout.prototype,"MSLayout");var M9Image=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Scale9Image);__reflect(M9Image.prototype,"M9Image");var MoonEvent=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.MoonEvent);__reflect(MoonEvent.prototype,"MoonEvent");var MGameData=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.GameData);__reflect(MGameData.prototype,"MGameData");var MConst=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Const);__reflect(MConst.prototype,"MConst");var MColor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.Color);__reflect(MColor.prototype,"MColor");var moon;!function(t){var e=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return __extends(a,e),a.prototype.render=function(){e.prototype.render.call(this),this.initView()},a.prototype.initView=function(){this.createBgGradientFill(),this.panelGame=new i,this.panelGame.addEvent(t.MoonEvent.OVER,this.onOver,this),this.addChild(this.panelGame),this.setBtn=new h,this.setBtn.x=100,this.setBtn.y=100,this.setBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openSetPanel,this),this.addChild(this.setBtn),this.panelSet=new o,this.panelSet.addEvent(t.MoonEvent.PLAY,this.onSetHandler,this),this.panelSet.addEvent(t.MoonEvent.CHANGE,this.onSetHandler,this),this.panelStart=new n,this.panelStart.addEvent(t.MoonEvent.START,this.start,this),this.addChild(this.panelStart),this.panelOver=new r,this.panelOver.addEvent(t.MoonEvent.START,this.start,this)},a.prototype.start=function(t){this.panelGame.initGame(),this.panelGame.start()},a.prototype.onOver=function(t){this.addChild(this.panelOver),this.panelOver.alpha=0,Tween.get(this.panelOver).to({alpha:1},300),this.panelOver.update(t.data)},a.prototype.openSetPanel=function(t){this.addChild(this.panelSet),this.panelSet.alpha=0,Tween.get(this.panelSet).to({alpha:1},300),this.panelGame.pause()},a.prototype.onSetHandler=function(e){if(e.type==t.MoonEvent.PLAY)this.panelGame.start();else{e.data;(e.dataType="soundBg")||(e.dataType="soundEffect")}},a}(t.GameView);t.BasicGameMain=e,__reflect(e.prototype,"moon.BasicGameMain");var i=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){this.createBgGradientFill(),this.txtScore=this.createText(),this.txtLevel=this.createText(200),this.txtBlood=this.createText(400),this.initGame()},i.prototype.initGame=function(){this.level=1,this.score=0,this.blood=200,this.updateBlood(),this.updateLevel(),this.updateScore()},i.prototype.start=function(){this.play()},i.prototype.pause=function(){this.stop()},i.prototype.loop=function(t){return this.blood--,this.score+=10,this.updateScore(),this.updateBlood(),!0},i.prototype.over=function(){this.dispEvent(t.MoonEvent.OVER,{score:this.score,level:this.level}),this.stop()},i.prototype.updateLevel=function(){this.txtLevel.text="level:"+this.level},i.prototype.updateScore=function(){this.txtScore.text="score:"+this.score,this.score>0&&this.score%200==0&&(this.level++,this.updateLevel())},i.prototype.updateBlood=function(){this.txtBlood.text="blood:"+this.blood,0==this.blood&&this.over()},i.prototype.createImageBg=function(t){this.addChild(new MImage(t))},i.prototype.dispose=function(){this.stop(),e.prototype.dispose.call(this)},i}(t.GameView);t.BasicGamePanel=i,__reflect(i.prototype,"moon.BasicGamePanel");var n=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var t=this.createBackground();t.alpha=.5,this.createBtn("开始游戏"),this.createTitle("游戏标题")},i.prototype.createBtn=function(t){var e=this.createButton(t);return e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),e.x=this.stageWidth-e.width>>1,e.y=this.stageHeight-e.height>>1,e},i.prototype.createTitle=function(t){var e=this.createText(0,0,t);return e.x=(this.stageWidth-e.width)/2,e.y=(this.stageHeight-e.height)/2-100,e},i.prototype.onClick=function(e){this.dispEvent(t.MoonEvent.START),Tween.get(this).to({alpha:0},300).call(this.backCall,this)},i.prototype.backCall=function(t){this.removeFromParent()},i.prototype.createImageBg=function(t){this.addChild(new MImage(t))},i}(t.GameView);t.BasicGameStart=n,__reflect(n.prototype,"moon.BasicGameStart");var r=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.initView=function(){var t=this.createBackground();t.alpha=.5,this.btnRestart=this.createBtn("再来一次"),this.btnRank=this.createBtn("排行榜"),this.btnRank.y+=100,this.txtScore=this.createText(),this.txtLevel=this.createText(),this.rankPanel=new a},i.prototype.update=function(e){this.txtScore.text="score:"+e.score,this.txtLevel.text="level:"+e.level,this.txtScore.x=(this.stageWidth-this.txtScore.width)/2,this.txtLevel.x=(this.stageWidth-this.txtLevel.width)/2,this.txtScore.y=(this.stageHeight-this.txtScore.height)/2-60,this.txtLevel.y=this.txtScore.y-60,t.GameData.score=e.score},i.prototype.onClick=function(i){var n=i.currentTarget;n==this.btnRestart?e.prototype.onClick.call(this,i):n==this.btnRank&&this.rankPanel&&t.GameData.stage.addChild(this.rankPanel)
},i}(n);t.BasicGameOver=r,__reflect(r.prototype,"moon.BasicGameOver");var o=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){var e=this.createBackground(0,.5);this.addChild(e);var i=new t.MoonDisplayObject,n=this.stageWidth>>1,r=16750848;i.type=t.Const.SHAPE_RECT_ROUND,i.data={w:1.1*n,h:n,ew:100,eh:100,c:r},i.setBackground(16777215,5),i.x=e.width-n>>1,i.y=e.height-n>>1,this.addChild(i);var o=new t.Label("背景音乐",16777215),a=new t.Label("游戏音效",16777215);o.textField.size=40,a.textField.size=40,o.x=a.x=50,o.y=50,a.y=150,i.addChild(o),i.addChild(a);var s=this.getToggleSwitch();s.x=o.x+o.width+10,s.y=o.y-5,i.addChild(s),this.btnSoundBg=s;var s=this.getToggleSwitch();s.x=a.x+a.width+10,s.y=a.y-5,i.addChild(s),this.btnSoundEffect=s;var h=new MButton;h.label="关  闭",h.x=i.width-h.width>>1,h.y=240,h.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),i.addChild(h),this.btnClose=h},i.prototype.getToggleSwitch=function(){var e=t.Skin.switchOn,i=t.Skin.switchOn,n=t.UI.Switch(t.Color.Blue,t.Color.White),r=t.UI.Switch(t.Color.Red,t.Color.White),o=new t.MoreSkinButton([e,i,n,r]);return o.toggleSwitch=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),o},i.prototype.onClick=function(e){var n,r=e.currentTarget;r==this.btnSoundBg?(n=this.btnSoundBg.currentPage,alertAuto("背景音乐"+(1==n?"开":"关"),1),l.localWrite(i.SOUND_BG,n.toString()),this.dispEvent(t.MoonEvent.CHANGE,this.btnSoundBg.currentPage,"soundBg")):r==this.btnSoundEffect?(n=this.btnSoundEffect.currentPage,alertAuto("游戏音效"+(1==n?"开":"关"),1),l.localWrite(i.SOUND_EFFECT,n.toString()),this.dispEvent(t.MoonEvent.CHANGE,this.btnSoundEffect.currentPage,"soundEffect")):r==this.btnClose&&(this.removeFromParent(),this.dispEvent(t.MoonEvent.PLAY))},i.prototype.setValue=function(){var t=l.localRead(i.SOUND_BG)||"1";this.btnSoundBg.updatePage(parseInt(t));var t=l.localRead(i.SOUND_EFFECT)||"1";this.btnSoundEffect.updatePage(parseInt(t))},i.SOUND_BG="sound bg",i.SOUND_EFFECT="sound effect",i}(t.BasicView);t.BasicGameSet=o,__reflect(o.prototype,"moon.BasicGameSet");var a=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=[],t.max=100,t}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this),this.initView()},i.prototype.initView=function(){this.createBackground(0,.5);var e=t.UI.Rect(this.stageWidth-100,this.stageHeight-200,0);e.alpha=.8,this.addChild(e),MILayout.getIns().setCenterXByPanent(e),MILayout.getIns().setCenterYByPanent(e);var i=new Rectangle(e.x,e.y,e.width,e.height),n=60,r=new Sprite;r.graphics.lineStyle(2,16777215),r.graphics.moveTo(i.x,i.y+n),r.graphics.lineTo(i.x,i.y),r.graphics.lineTo(i.right,i.y),r.graphics.lineTo(i.right,i.bottom),r.graphics.lineTo(i.x,i.bottom),r.graphics.lineTo(i.x,i.y+n),r.graphics.lineTo(i.right,i.y+n),this.addChild(r);var o=30,a=t.UI.Circle(o,16777215),h=t.UI.CloseButton(o>>1,o>>1,65280,4);h.anchorOffsetX=h.anchorOffsetY=o>>2,a.addChild(h);var l=new MButton(a,a);l.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClick,this),this.addChild(l),l.x=e.x+e.width,l.y=e.y;var c=this.createText(0,0,"分数排行榜");MILayout.getIns().setCenterXByPanent(c),c.y=e.y+(n-c.height)/2,this.addChild(c);var c=this.createText(e.x,e.y-n/2);this.addChild(c),this.txtRank=c,this.txtRank.text="你的排名:",this.conatiner=new Sprite,this.addChild(this.conatiner);for(var u=e.width-2,d=0;d<this.max;d++){var p=new s(u,d);this.conatiner.addChild(p),this.items.push(p)}t.SimpleLayout.displayRank(this.items,1);var g=new t.ScrollBar;g.target=this.conatiner,g.setSize(i.width,i.height-n-2),g.layout(t.Const.VERTICAL),this.addChild(g),g.x=i.x+1,g.y=i.y+n+2},i.prototype.onClick=function(t){this.removeFromParent()},i.prototype.update=function(e){for(var i=this.max,n=-1,r=0;i>r;r++)if(r<=this.max){var o=100,a=this.items[r];if(a.txtScore.text=""+o,i-1>r){var s=90;t.GameData.score>s&&t.GameData.score<=o&&(n=r)}}n>0?this.txtRank.text="你的排名:"+n:this.txtRank.text="未上榜"},i}(t.BasicView);t.BasicGameRank=a,__reflect(a.prototype,"moon.BasicGameRank");var s=function(t){function e(e,i){var n=t.call(this)||this;return n.colors=[0,14516795,13805662,14668132],n.w=e,n.rank=i+1,n.initView(),n}return __extends(e,t),e.prototype.initView=function(){var t=this.createRect(this.w,80,0);t.alpha=this.rank%2==0?.6:.1,this.addChild(t),this.txtRank=this.createText(150,0),this.txtScore=this.createText(350,0),this.rank<=3&&(this.txtRank.textColor=this.txtScore.textColor=this.colors[this.rank]),this.txtRank.text=String(this.rank),this.txtScore.text=String(0),MILayout.getIns().setCenterYByPanent(this.txtRank),MILayout.getIns().setCenterYByPanent(this.txtScore)},e}(t.BasicView);t.RankItem=s,__reflect(s.prototype,"moon.RankItem");var h=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.prototype.render=function(){e.prototype.render.call(this);var t=this.getSkin(),i=this.getSkin(16733440);this.statusNormal=t,this.statusDown=i,this.updateSkin(this.statusNormal)},i.prototype.getSkin=function(e){void 0===e&&(e=16750848);var i=e,n=6963200,r=new Sprite,o=90,a=new t.MoonDisplayObject;a.type=t.Const.SHAPE_RECT_ROUND,a.data={w:o,h:o,ew:30,eh:30,c:i},a.anchorOffsetX=a.anchorOffsetY=o>>1,r.addChild(a),r.addChild(t.UI.Circle(30,n));for(var s=8,h=360/s,l=0;s>l;l++){var c=t.UI.Rect(15,80,n);c.anchorOffsetX=c.width>>1,c.anchorOffsetY=c.height>>1,c.rotation=h*l,r.addChild(c)}return r.addChild(t.UI.Circle(20,i)),r.addChild(t.UI.Circle(6,n)),r.anchorOffsetX=r.anchorOffsetY=-(o/2+4),r},i}(MButton);t.SetButton=h,__reflect(h.prototype,"moon.SetButton");var l=function(){function e(){}return e.getGameIdKey=function(e){return t.GameData.gameId+e},e.localWrite=function(t,e){egret.localStorage.setItem(this.getGameIdKey(t),e)},e.localRead=function(t){return egret.localStorage.getItem(this.getGameIdKey(t))},e.localRemove=function(t){egret.localStorage.removeItem(this.getGameIdKey(t))},e.localClear=function(){egret.localStorage.clear()},e.serverWrite=function(){},e.serverRead=function(){return""},e.serverRemove=function(){},e}();t.BasicGameStorage=l,__reflect(l.prototype,"moon.BasicGameStorage");var c=function(){function e(){}return e.init=function(e){egret.Capabilities.isMobile?e.scaleMode=egret.StageScaleMode.FIXED_WIDTH:e.scaleMode=egret.StageScaleMode.SHOW_ALL,t.GameData.stageWidth=e.stageWidth,t.GameData.stageHeight=e.stageHeight,t.GameData.stage=e,t.TipsManager.getIns().init(e),t.LogManager.getIns().init(e),t.AlertManager.getIns().init(e)},e}();t.GameMoon=c,__reflect(c.prototype,"moon.GameMoon");var u=function(){function t(){}return t.getTimeFormatByNum=function(t,e,i){void 0===e&&(e=":"),void 0===i&&(i=3);var n,r,o;return 1==i?o=this.numberFormat(t):2==i?(r=this.numberFormat(t/60),o=this.numberFormat(t%60),r+e+o):(n=this.numberFormat(t/60/60>>0),r=this.numberFormat(t/60%60),o=this.numberFormat(t%60),n+e+r+e+o)},t.numberFormat=function(t){return t=Math.floor(t),t>=10?""+t:"0"+t},t.twoDistance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},t.hitTestRect=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x,i.y=t.y,n.x=e.x,n.y=e.y,i.intersects(n)},t}();t.GameUtils=u,__reflect(u.prototype,"moon.GameUtils")}(moon||(moon={}));var MGameMain=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGameMain);__reflect(MGameMain.prototype,"MGameMain");var MGamePanel=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGamePanel);__reflect(MGamePanel.prototype,"MGamePanel");var MGameStart=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGameStart);__reflect(MGameStart.prototype,"MGameStart");var MGameOver=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGameOver);__reflect(MGameOver.prototype,"MGameOver");var MGameSet=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGameSet);__reflect(MGameSet.prototype,"MGameSet");var MGameRank=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.BasicGameRank);__reflect(MGameRank.prototype,"MGameRank");var MRankItem=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.RankItem);__reflect(MRankItem.prototype,"MRankItem");var MGameMoon=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.GameMoon);__reflect(MGameMoon.prototype,"MGameMoon");var MGameUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(moon.GameUtils);__reflect(MGameUtils.prototype,"MGameUtils");